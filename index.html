<!doctype html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pix2Print — AI Resolution Engine for Print Businesses</title>
<link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; viewBox=&#39;0 0 100 100&#39;&gt;&lt;rect width=&#39;100&#39; height=&#39;100&#39; fill=&#39;%23c94f2a&#39;/&gt;&lt;text y=&#39;75&#39; font-size=&#39;60&#39; fill=&#39;white&#39; font-family=&#39;serif&#39; font-weight=&#39;bold&#39;&gt;P&lt;/text&gt;&lt;/svg&gt;">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&amp;family=Outfit:wght@300;400;500;600&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet">
<style>
:root{
  --ink:#1a1612;--ink2:#2e2925;--warm:#f7f4ef;--warm2:#ede9e1;--warm3:#e0dbd1;
  --card:#fff;--terra:#c94f2a;--terra2:#e0672f;--terra-bg:rgba(201,79,42,.07);--terra-bd:rgba(201,79,42,.2);
  --gold:#b5860a;--gold-bg:rgba(181,134,10,.08);--green:#2a6e4a;--green-bg:rgba(42,110,74,.07);
  --muted:#7a746a;--muted2:#5a5550;
  --s2:0 4px 20px rgba(26,22,18,.1);--s3:0 12px 48px rgba(26,22,18,.15);--s4:0 32px 80px rgba(26,22,18,.2);
}
*{margin:0;padding:0;box-sizing:border-box;}
html{scroll-behavior:smooth;}
body{font-family:'Outfit',sans-serif;background:var(--warm);color:var(--ink);min-height:100vh;overflow-x:hidden;}
::-webkit-scrollbar{width:4px;}
::-webkit-scrollbar-thumb{background:var(--warm3);border-radius:2px;}

nav{position:sticky;top:0;z-index:200;height:58px;background:rgba(247,244,239,.93);backdrop-filter:blur(20px);border-bottom:1px solid rgba(26,22,18,.07);display:flex;align-items:center;padding:0 32px;justify-content:space-between;}
.logo{font-family:'Cormorant Garamond',serif;font-size:22px;font-weight:600;letter-spacing:-.03em;display:flex;align-items:center;gap:8px;color:var(--ink);text-decoration:none;}
.logo-mark{width:26px;height:26px;background:var(--ink);border-radius:6px;display:flex;align-items:center;justify-content:center;color:var(--warm);font-family:'Cormorant Garamond',serif;font-style:italic;font-size:13px;}
.nav-r{display:flex;gap:10px;align-items:center;}

.btn{display:inline-flex;align-items:center;gap:6px;padding:9px 20px;border-radius:8px;font-family:'Outfit',sans-serif;font-size:13px;font-weight:500;cursor:pointer;border:none;transition:all .2s;white-space:nowrap;}
.btn-ink{background:var(--ink);color:var(--warm);}
.btn-ink:hover{background:var(--ink2);transform:translateY(-1px);box-shadow:var(--s2);}
.btn-outline{background:transparent;color:var(--muted2);border:1px solid rgba(26,22,18,.14);}
.btn-outline:hover{border-color:var(--ink);color:var(--ink);background:var(--warm2);}
.btn-terra{background:var(--terra);color:white;font-weight:600;}
.btn-terra:hover{background:#b8421f;transform:translateY(-1px);box-shadow:0 6px 20px rgba(201,79,42,.35);}
.btn-lg{padding:13px 28px;font-size:15px;border-radius:10px;}
.btn-sm{padding:6px 14px;font-size:12px;border-radius:6px;}
.btn-full{width:100%;justify-content:center;}
.btn:disabled{opacity:.4;cursor:not-allowed;transform:none!important;box-shadow:none!important;}

/* STEP BAR */
.stepbar{display:flex;align-items:center;max-width:580px;margin:0 auto;padding:24px 32px 0;}
.si{display:flex;flex-direction:column;align-items:center;gap:5px;flex:1;position:relative;}
.si:not(:last-child)::after{content:'';position:absolute;top:15px;left:calc(50%+19px);right:calc(-50%+19px);height:1px;background:var(--warm3);transition:background .4s;}
.si.done:not(:last-child)::after,.si.act:not(:last-child)::after{background:var(--terra);}
.sc{width:30px;height:30px;border-radius:50%;background:var(--warm3);border:2px solid transparent;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:var(--muted);transition:all .3s;position:relative;z-index:1;}
.si.act .sc{background:var(--terra);border-color:var(--terra);color:white;box-shadow:0 0 0 5px rgba(201,79,42,.12);}
.si.done .sc{background:var(--green);border-color:var(--green);color:white;}
.sl{font-size:10px;color:var(--muted);font-weight:500;text-align:center;white-space:nowrap;}
.si.act .sl{color:var(--terra);font-weight:700;}
.si.done .sl{color:var(--green);}

.screen{display:none;padding:32px;max-width:1100px;margin:0 auto;animation:sIn .3s ease;}
.screen.act{display:block;}
@keyframes sIn{from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);}}
.sh{font-family:'Cormorant Garamond',serif;font-size:clamp(24px,3vw,32px);font-weight:300;margin-bottom:4px;letter-spacing:-.02em;}
.ss{font-size:14px;color:var(--muted);margin-bottom:28px;font-weight:300;line-height:1.6;}

.card{background:var(--card);border:1px solid rgba(26,22,18,.08);border-radius:16px;overflow:hidden;}
.ph{padding:12px 18px;background:var(--warm2);border-bottom:1px solid rgba(26,22,18,.07);font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);display:flex;align-items:center;gap:7px;}
.pb{padding:18px;display:flex;flex-direction:column;gap:12px;}

/* UPLOAD */
.upload-zone{border:2px dashed rgba(26,22,18,.14);border-radius:20px;padding:72px 40px;text-align:center;cursor:pointer;transition:all .3s;background:rgba(255,255,255,.7);}
.upload-zone:hover,.upload-zone.over{border-color:var(--terra);background:rgba(201,79,42,.03);}
.upload-zone h2{font-family:'Cormorant Garamond',serif;font-size:26px;font-weight:300;margin-bottom:8px;}
.upload-zone p{font-size:14px;color:var(--muted);margin-bottom:22px;font-weight:300;}
.fmt-row{display:flex;gap:6px;justify-content:center;margin-top:14px;flex-wrap:wrap;}
.fmt-chip{padding:3px 9px;background:var(--warm2);border-radius:5px;font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--muted);}
.uc-card{display:none;background:var(--card);border-radius:18px;box-shadow:var(--s3);overflow:hidden;}
.uc-img-area{background:var(--warm2);min-height:260px;display:flex;align-items:center;justify-content:center;}
.uc-img-area img{max-width:100%;max-height:300px;object-fit:contain;}
.uc-meta{padding:18px 22px;border-top:1px solid rgba(26,22,18,.06);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;}
.uc-stats{display:flex;gap:20px;flex-wrap:wrap;}
.uc-sl{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.07em;color:var(--muted);}
.uc-sv{font-family:'JetBrains Mono',monospace;font-size:13px;margin-top:1px;}

/* PRODUCT */
.cat-tabs{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:20px;}
.ctab{padding:7px 15px;border-radius:100px;border:1px solid rgba(26,22,18,.12);background:transparent;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;font-family:'Outfit',sans-serif;color:var(--muted2);}
.ctab:hover{border-color:var(--terra);color:var(--terra);}
.ctab.on{background:var(--ink);border-color:var(--ink);color:var(--warm);}
.pg{display:grid;grid-template-columns:repeat(auto-fill,minmax(172px,1fr));gap:11px;}
.pc{background:var(--card);border:2px solid rgba(26,22,18,.07);border-radius:14px;padding:18px;cursor:pointer;transition:all .2s;position:relative;}
.pc:hover{border-color:var(--terra);transform:translateY(-2px);box-shadow:var(--s2);}
.pc.on{border-color:var(--terra);background:var(--terra-bg);}
.pc.on::after{content:'✓';position:absolute;top:9px;right:11px;width:20px;height:20px;background:var(--terra);color:white;border-radius:50%;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center;}
.pc-ico{font-size:26px;margin-bottom:9px;display:block;}
.pc-name{font-family:'Cormorant Garamond',serif;font-size:15px;font-weight:600;margin-bottom:2px;}
.pc-dims{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--muted);}
.pc-dpi{font-size:11px;color:var(--muted2);margin-top:3px;}
.shirt-cfg{display:none;background:var(--card);border:1px solid rgba(26,22,18,.09);border-radius:14px;padding:22px;margin-top:12px;}
.shirt-cfg.show{display:block;}
.sz-row{display:flex;gap:7px;flex-wrap:wrap;margin-top:8px;}
.sz{padding:9px 16px;border:2px solid rgba(26,22,18,.12);border-radius:8px;font-family:'Outfit',sans-serif;font-weight:700;font-size:14px;cursor:pointer;transition:all .2s;color:var(--muted2);}
.sz:hover{border-color:var(--terra);color:var(--terra);}
.sz.on{background:var(--ink);border-color:var(--ink);color:white;}
.sz-info{margin-top:10px;padding:9px 13px;background:var(--warm);border-radius:7px;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--muted2);}
.pl-row{display:flex;gap:7px;flex-wrap:wrap;margin-top:10px;}
.pl-btn{padding:7px 13px;border:1px solid rgba(26,22,18,.12);border-radius:8px;font-size:12px;font-weight:600;cursor:pointer;font-family:'Outfit',sans-serif;transition:all .2s;color:var(--muted2);background:transparent;}
.pl-btn:hover{border-color:var(--terra);color:var(--terra);}
.pl-btn.on{background:var(--ink);border-color:var(--ink);color:white;}

/* ENGINE LAYOUT */
.engine-layout{display:grid;grid-template-columns:300px 1fr;gap:20px;margin-bottom:20px;}
.analysis-col{display:flex;flex-direction:column;gap:14px;}

/* Quality bars */
.quality-card{background:var(--card);border:1px solid rgba(26,22,18,.08);border-radius:16px;padding:22px;}
.q-title{font-family:'Cormorant Garamond',serif;font-size:18px;font-weight:600;margin-bottom:16px;}
.q-row{display:flex;flex-direction:column;gap:5px;margin-bottom:10px;}
.q-lbl{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.07em;color:var(--muted);display:flex;justify-content:space-between;}
.q-bar-wrap{height:7px;background:var(--warm3);border-radius:4px;overflow:hidden;}
.q-bar{height:100%;border-radius:4px;width:0%;transition:width .8s cubic-bezier(.34,1.56,.64,1);}
.qb-ok{background:linear-gradient(90deg,#2a6e4a,#3a9e6a);}
.qb-warn{background:linear-gradient(90deg,#b5860a,#e0aa1a);}
.qb-bad{background:linear-gradient(90deg,#b5200a,#e03020);}

/* Scale card */
.scale-card{background:var(--ink);border-radius:16px;padding:22px;color:var(--warm);}
.sc-label{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:rgba(247,244,239,.4);margin-bottom:8px;}
.sc-big{font-family:'Cormorant Garamond',serif;font-size:52px;font-weight:300;line-height:1;}
.sc-sub{font-size:12px;color:rgba(247,244,239,.5);margin-top:4px;font-weight:300;}
.sc-pills{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin-top:14px;}
.sc-pill{padding:9px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:8px;font-family:'Outfit',sans-serif;font-weight:700;font-size:13px;text-align:center;cursor:pointer;transition:all .2s;color:rgba(247,244,239,.6);}
.sc-pill:hover{background:rgba(255,255,255,.12);}
.sc-pill.on{background:var(--terra);border-color:var(--terra);color:white;}
.sc-pill.locked{opacity:.35;cursor:not-allowed;}

/* ALERTS */
.al{padding:10px 14px;border-radius:10px;font-size:12px;line-height:1.55;display:flex;gap:8px;align-items:flex-start;}
.al-ok{background:var(--green-bg);color:var(--green);border:1px solid rgba(42,110,74,.15);}
.al-warn{background:var(--gold-bg);color:var(--gold);border:1px solid rgba(181,134,10,.2);}
.al-info{background:var(--terra-bg);color:var(--terra);border:1px solid var(--terra-bd);}
.al-bad{background:rgba(196,42,42,.06);color:#c42a2a;border:1px solid rgba(196,42,42,.15);}

/* Toggles */
.tog-row{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--warm);border-radius:10px;cursor:pointer;transition:background .2s;}
.tog-row:hover{background:var(--warm2);}
.tog-sw{width:38px;height:20px;background:var(--warm3);border-radius:10px;position:relative;transition:background .3s;border:1px solid rgba(26,22,18,.12);}
.tog-sw.on{background:var(--terra);border-color:var(--terra);}
.tog-knob{position:absolute;top:1px;left:1px;width:16px;height:16px;background:white;border-radius:50%;transition:transform .3s;box-shadow:0 1px 4px rgba(0,0,0,.15);}
.tog-sw.on .tog-knob{transform:translateX(18px);}
.divline{height:1px;background:rgba(26,22,18,.07);}

/* ─── THE CORE: BEFORE/AFTER COMPARE ─── */
.compare-card{background:var(--card);border:1px solid rgba(26,22,18,.08);border-radius:16px;overflow:hidden;}
.compare-toolbar{padding:12px 18px;border-bottom:1px solid rgba(26,22,18,.07);display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;}
.compare-stage{
  position:relative;height:380px;background:#111;
  overflow:hidden;cursor:col-resize;user-select:none;
}
.cs{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;overflow:hidden;}
.cs img{max-width:100%;max-height:100%;object-fit:contain;display:block;}
.cs-before{z-index:2;clip-path:inset(0 50% 0 0);}
.cs-after{z-index:1;}
.cmp-line{position:absolute;top:0;bottom:0;left:50%;width:2px;background:white;z-index:4;transform:translateX(-50%);pointer-events:none;}
.cmp-handle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:40px;height:40px;background:white;border-radius:50%;z-index:5;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 16px rgba(0,0,0,.35);font-size:16px;cursor:col-resize;pointer-events:all;transition:transform .2s;}
.cmp-handle:hover{transform:translate(-50%,-50%) scale(1.1);}
.cmp-chip{position:absolute;bottom:12px;padding:4px 10px;border-radius:6px;font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:500;z-index:6;}
.chip-b{left:12px;background:rgba(0,0,0,.7);color:rgba(255,255,255,.7);}
.chip-a{right:12px;background:var(--terra);color:white;}
.dpi-ov{position:absolute;top:12px;right:12px;z-index:6;background:rgba(0,0,0,.72);border-radius:8px;padding:8px 12px;display:flex;flex-direction:column;gap:3px;}
.dpi-row{display:flex;align-items:center;gap:8px;font-family:'JetBrains Mono',monospace;font-size:10px;color:rgba(255,255,255,.5);}

/* Not-processed overlay */
.not-proc{position:absolute;inset:0;background:rgba(20,16,12,.88);z-index:8;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;text-align:center;padding:20px;}
.mode-tabs{display:flex;background:rgba(26,22,18,.06);border-radius:8px;padding:2px;gap:2px;}
.mtab{padding:5px 13px;border-radius:6px;font-size:11px;font-weight:600;cursor:pointer;transition:all .2s;color:var(--muted2);}
.mtab.on{background:var(--card);color:var(--ink);box-shadow:0 1px 4px rgba(26,22,18,.07);}

/* Output bar */
.out-bar{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:14px 18px;border-top:1px solid rgba(26,22,18,.07);}
.out-s{text-align:center;}
.out-l{font-size:10px;text-transform:uppercase;letter-spacing:.07em;color:var(--muted);font-weight:600;margin-bottom:3px;}
.out-v{font-family:'Cormorant Garamond',serif;font-size:20px;font-weight:600;}
.out-sub{font-size:10px;color:var(--muted);margin-top:1px;}
.v-ok{color:var(--green);}
.v-warn{color:var(--gold);}
.v-bad{color:#c42a2a;}

/* SLIDERS */
.sl-g{display:flex;flex-direction:column;gap:6px;}
.sl-l{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--muted);display:flex;justify-content:space-between;}
.sl-v{font-family:'JetBrains Mono',monospace;color:var(--terra);font-weight:400;text-transform:none;font-size:11px;}
input[type=range]{width:100%;height:3px;border-radius:2px;outline:none;background:var(--warm3);-webkit-appearance:none;cursor:pointer;}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:var(--ink);border:2px solid white;box-shadow:0 1px 5px rgba(0,0,0,.2);}
.align-g{display:grid;grid-template-columns:repeat(3,1fr);gap:4px;}
.ag{padding:7px;background:var(--warm);border:1px solid rgba(26,22,18,.07);border-radius:6px;cursor:pointer;text-align:center;font-size:13px;transition:all .15s;}
.ag:hover{background:var(--warm2);}
.ag.on{background:var(--ink);border-color:var(--ink);color:var(--warm);}

/* CANVAS MOCKUP */
.canvas-wrap{background:var(--card);border:1px solid rgba(26,22,18,.08);border-radius:14px;overflow:hidden;}
.canvas-bar{padding:9px 15px;border-bottom:1px solid rgba(26,22,18,.07);display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;}
.ci{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--muted);}
.canvas-stage{min-height:360px;display:flex;align-items:center;justify-content:center;padding:24px;background:radial-gradient(ellipse at center,white 0%,var(--warm) 100%);position:relative;overflow:hidden;}
.print-zone{position:absolute;border:1.5px dashed rgba(201,79,42,.4);border-radius:3px;overflow:visible;}
.pz-lbl{position:absolute;top:-17px;left:0;font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--terra);background:white;padding:2px 6px;border-radius:3px;border:1px solid var(--terra-bd);white-space:nowrap;}
.de{position:absolute;cursor:move;z-index:10;touch-action:none;}
.de img{display:block;width:100%;height:100%;object-fit:contain;pointer-events:none;}
.de.sel{outline:2px solid var(--terra);outline-offset:2px;box-shadow:0 0 0 4px rgba(201,79,42,.1);}
.rh{position:absolute;bottom:-7px;right:-7px;width:14px;height:14px;background:var(--terra);border-radius:50%;cursor:se-resize;z-index:11;box-shadow:0 1px 4px rgba(0,0,0,.2);}
.checker{background-image:linear-gradient(45deg,#ddd 25%,transparent 25%),linear-gradient(-45deg,#ddd 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ddd 75%),linear-gradient(-45deg,transparent 75%,#ddd 75%);background-size:12px 12px;background-position:0 0,0 6px,6px -6px,-6px 0;background-color:#fff;}
.z-row{display:flex;align-items:center;gap:5px;}
.zb{padding:4px 9px;border:1px solid rgba(26,22,18,.12);border-radius:6px;font-size:13px;cursor:pointer;background:white;transition:all .2s;}
.zb:hover{background:var(--warm);}
.zlbl{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--muted);min-width:34px;text-align:center;}

/* PROCESSING */
.proc-wrap{display:none;max-width:520px;margin:0 auto;padding:60px 32px;text-align:center;}
.proc-wrap.act{display:block;}
@keyframes spin{to{transform:rotate(360deg);}}
.pbar-wrap{height:4px;background:var(--warm3);border-radius:2px;overflow:hidden;margin-bottom:8px;}
.pbar-fill{height:100%;background:linear-gradient(90deg,var(--terra),var(--terra2));border-radius:2px;width:0%;transition:width .15s linear;}
.plog{margin-top:24px;text-align:left;background:var(--card);border-radius:12px;border:1px solid rgba(26,22,18,.08);overflow:hidden;}
.pl{padding:9px 15px;font-family:'JetBrains Mono',monospace;font-size:11px;border-bottom:1px solid rgba(26,22,18,.05);display:flex;align-items:center;gap:8px;opacity:.2;transition:opacity .3s;color:var(--ink);}
.pl:last-child{border-bottom:none;}
.pl.done{opacity:1;color:var(--green);}
.pl.cur{opacity:1;color:var(--terra);}
.pl-dot{width:5px;height:5px;border-radius:50%;background:currentColor;flex-shrink:0;}

/* RESULT */
.result-layout{display:grid;grid-template-columns:1fr 300px;gap:20px;align-items:start;}
.dl-box{background:var(--card);border-radius:16px;border:1px solid rgba(26,22,18,.08);overflow:hidden;}
.dl-tabs{display:flex;border-bottom:1px solid rgba(26,22,18,.07);}
.dl-tab{flex:1;padding:11px;text-align:center;font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:500;cursor:pointer;transition:all .2s;color:var(--muted);border-bottom:2px solid transparent;}
.dl-tab:hover{color:var(--ink);}
.dl-tab.on{color:var(--terra);border-bottom-color:var(--terra);}
.dl-tab.off{opacity:.3;cursor:not-allowed;}
.dl-body{padding:16px;display:flex;flex-direction:column;gap:9px;}
.dl-note{font-size:12px;color:var(--muted);line-height:1.55;padding:9px 12px;background:var(--warm);border-radius:8px;}
.stat-g{display:grid;grid-template-columns:1fr 1fr;gap:9px;margin-top:12px;}
.sbox{background:var(--warm);border:1px solid rgba(26,22,18,.07);border-radius:10px;padding:13px;}
.slbl{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.07em;color:var(--muted);margin-bottom:3px;}
.sval{font-family:'Cormorant Garamond',serif;font-size:20px;font-weight:600;line-height:1;}
.ssub{font-size:10px;color:var(--muted);margin-top:2px;}
.chk{display:flex;align-items:flex-start;gap:8px;padding:7px 0;border-bottom:1px solid rgba(26,22,18,.06);font-size:12px;line-height:1.4;}
.chk:last-child{border-bottom:none;}
.nav-actions{display:flex;justify-content:space-between;align-items:center;margin-top:28px;padding-top:22px;border-top:1px solid rgba(26,22,18,.08);}
.toast{position:fixed;bottom:22px;right:22px;background:var(--ink);color:var(--warm);padding:11px 16px;border-radius:9px;font-size:13px;z-index:9999;transform:translateY(60px);opacity:0;transition:all .3s cubic-bezier(.34,1.56,.64,1);max-width:280px;box-shadow:var(--s3);}
.toast.show{transform:translateY(0);opacity:1;}

/* DL badge: real-working banner */
.real-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:linear-gradient(135deg,var(--terra-bg),var(--gold-bg));border:1px solid var(--terra-bd);border-radius:8px;font-size:11px;font-weight:600;color:var(--terra);margin-bottom:4px;}

@media(max-width:860px){.engine-layout{grid-template-columns:1fr;}.result-layout{grid-template-columns:1fr;}}
</style>
  <!-- Clerk Auth (solo en producción) -->
  <script>
    // Solo cargar Clerk si NO estamos en localhost
    var isLocalDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
    if (!isLocalDev) {
      var clerkScript = document.createElement('script');
      clerkScript.async = true;
      clerkScript.crossOrigin = 'anonymous';
      clerkScript.setAttribute('data-clerk-publishable-key', 'pk_live_Y2xlcmsucGl4MnByaW50Lm5ldCQ');
      clerkScript.src = 'https://cdn.jsdelivr.net/npm/@clerk/clerk-js@5/dist/clerk.browser.js';
      clerkScript.type = 'text/javascript';
      document.head.appendChild(clerkScript);
    }
  </script>
  <script src="https://js.stripe.com/v3/"></script>
  <link rel="canonical" href="https://pix2print.net/">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>
<body>

<nav>
  <a class="logo" href="#" style="text-decoration:none;display:flex;align-items:center;"><img src="data:image/png;base64,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" alt="Pix2Print" style="height:41px;width:auto;display:block;border-radius:6px;"></a>
  <div class="nav-r" style="display:flex;align-items:center;gap:8px;">
    <button class="btn btn-outline btn-sm" id="restart-btn" onclick="resetAll()" style="display:none">↩ Empezar de nuevo</button>
    <!-- Nav links -->
    <div id="nav-links" style="display:flex;align-items:center;gap:20px;margin-right:8px;">
      <a onclick="document.getElementById(&#39;how-it-works&#39;) &amp;&amp; document.getElementById(&#39;how-it-works&#39;).scrollIntoView({behavior:&#39;smooth&#39;})" style="font-size:13px;color:#5a5550;text-decoration:none;font-weight:500;cursor:pointer;">Cómo funciona</a>
      <a onclick="document.getElementById(&#39;pricing-section&#39;) &amp;&amp; document.getElementById(&#39;pricing-section&#39;).scrollIntoView({behavior:&#39;smooth&#39;})" style="font-size:13px;color:#5a5550;text-decoration:none;font-weight:500;cursor:pointer;">Precios</a>
    </div>
    <!-- Logged out -->
    <div id="nav-auth-out" style="display:flex;gap:8px;align-items:center;">
      <button class="btn btn-outline btn-sm" onclick="openAuthModal(&#39;login&#39;)">Iniciar sesión</button>
      <button class="btn btn-terra btn-sm" onclick="scrollToApp()">Comenzar gratis</button>
    </div>
    <!-- Logged in -->
    <div id="nav-auth-in" style="display:none;align-items:center;gap:8px;">
      <div id="nav-user-mount"></div>
      <span id="nav-plan-badge" style="padding:3px 10px;background:rgba(201,79,42,.1);color:#c94f2a;border-radius:20px;font-size:11px;font-weight:700;">FREE</span>
      <button class="btn btn-terra btn-sm" onclick="document.getElementById(&#39;pricing-section&#39;).scrollIntoView({behavior:&#39;smooth&#39;})">Upgrade ⚡</button>
    </div>
  </div>
</nav>

<!-- STEPS -->
<div class="stepbar">
  <div class="si act" id="si1"><div class="sc">1</div><div class="sl">Subir imagen</div></div>
  <div class="si" id="si2"><div class="sc">2</div><div class="sl">Elegir producto</div></div>
  <div class="si" id="si3"><div class="sc">3</div><div class="sl">Mejorar imagen</div></div>
  <div class="si" id="si4"><div class="sc">4</div><div class="sl">Descargar</div></div>
</div>

<!-- Hidden work canvases -->
<canvas id="wc-before" style="display:none"></canvas>
<canvas id="wc-after" style="display:none"></canvas>

<!-- ══ SCREEN 1: UPLOAD ══ -->
<div class="screen act" id="sc1">
  <div class="sh">Sube tu imagen de baja resolución</div>
  <p class="ss">Foto pixelada, arte de IA, logo pequeño — lo que sea. Aquí lo mejoramos.</p>

  <div class="upload-zone" id="upload-zone" onclick="document.getElementById(&#39;file-inp&#39;).click()" ondragover="event.preventDefault();this.classList.add(&#39;over&#39;)" ondragleave="this.classList.remove(&#39;over&#39;)" ondrop="dropFile(event)">
    <div style="font-size:52px;margin-bottom:16px;">🖼️</div>
    <h2 style="text-align:center;">Arrastra tu imagen aquí</h2>
    <p style="text-align:center;">Sube cualquier imagen — baja resolución está bien, para eso estamos</p>
    <button class="btn btn-terra btn-lg" onclick="event.stopPropagation();document.getElementById(&#39;file-inp&#39;).click()">Elegir archivo</button>
    <div class="fmt-row" style="justify-content:center;">
      <span class="fmt-chip">PNG</span><span class="fmt-chip">JPG</span><span class="fmt-chip">WEBP</span><span class="fmt-chip">GIF</span>
    </div>
    <p style="font-size:11px;color:var(--muted);margin-top:12px;font-style:italic;text-align:center;">Al subir confirmas que tienes los derechos sobre esta imagen.</p>
  </div>
  <input type="file" id="file-inp" accept="image/*" style="display:none" onchange="handleFile(event)">

  <div class="uc-card" id="uc-card">
    <div class="uc-img-area"><img id="prev-img" src="" alt="preview"></div>
    <div class="uc-meta">
      <div class="uc-stats">
        <div><div class="uc-sl">Archivo</div><div class="uc-sv" id="m-name">—</div></div>
        <div><div class="uc-sl">Resolución</div><div class="uc-sv" id="m-dims">—</div></div>
        <div><div class="uc-sl">Tamaño</div><div class="uc-sv" id="m-size">—</div></div>
        <div><div class="uc-sl">Formato</div><div class="uc-sv" id="m-fmt">—</div></div>
        <div><div class="uc-sl">Calidad est.</div><div class="uc-sv" id="m-qual" style="color:var(--terra)">—</div></div>
      </div>
      <div style="display:flex;gap:8px;">
        <button class="btn btn-outline btn-sm" onclick="document.getElementById(&#39;file-inp&#39;).click()">Cambiar</button>
        <button class="btn btn-terra" onclick="goTo(2)">Elegir producto →</button>
      </div>
    </div>
  </div>
</div>

<!-- ══ SCREEN 2: PRODUCT ══ -->
<div class="screen" id="sc2">
  <div class="sh">¿Dónde quieres imprimirla?</div>
  <p class="ss">Selecciona el producto — calculamos exactamente cuánto upscale necesita tu imagen.</p>
  <div class="cat-tabs">
    <div class="ctab on" onclick="filterCat(this,&#39;all&#39;)">Todos</div>
    <div class="ctab" onclick="filterCat(this,&#39;apparel&#39;)">👕 Ropa</div>
    <div class="ctab" onclick="filterCat(this,&#39;mug&#39;)">☕ Mugs</div>
    <div class="ctab" onclick="filterCat(this,&#39;poster&#39;)">🖼 Pósters</div>
    <div class="ctab" onclick="filterCat(this,&#39;paper&#39;)">📄 Papel</div>
    <div class="ctab" onclick="filterCat(this,&#39;other&#39;)">⚙ Otro</div>
  </div>
  <div class="pg" id="preset-grid"></div>
  <div class="shirt-cfg" id="shirt-cfg">
    <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:20px;font-weight:600;margin-bottom:3px;">Configurar camiseta</div>
    <div style="font-size:13px;color:var(--muted);margin-bottom:14px;">Elige talla y ubicación del estampado</div>
    <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--muted);margin-bottom:7px;">Talla</div>
    <div class="sz-row">
      <div class="sz" onclick="selSz(this,&#39;XS&#39;)">XS</div>
      <div class="sz" onclick="selSz(this,&#39;S&#39;)">S</div>
      <div class="sz on" onclick="selSz(this,&#39;M&#39;)">M</div>
      <div class="sz" onclick="selSz(this,&#39;L&#39;)">L</div>
      <div class="sz" onclick="selSz(this,&#39;XL&#39;)">XL</div>
      <div class="sz" onclick="selSz(this,&#39;2XL&#39;)">2XL</div>
    </div>
    <div class="sz-info" id="sz-info">M — Área: 28×34 cm · 300 DPI · 3307×4016 px requeridos</div>
    <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--muted);margin:12px 0 7px;">Ubicación del estampado</div>
    <div class="pl-row">
      <div class="pl-btn on" onclick="selPl(this,&#39;front&#39;)">👕 Frente</div>
      <div class="pl-btn" onclick="selPl(this,&#39;back&#39;)">↩ Espalda</div>
      <div class="pl-btn" onclick="selPl(this,&#39;left-chest&#39;)">◈ Pecho izq.</div>
      <div class="pl-btn" onclick="selPl(this,&#39;sleeve&#39;)">| Manga</div>
    </div>
  </div>
  <div class="nav-actions">
    <button class="btn btn-outline" onclick="goTo(1)">← Volver</button>
    <button class="btn btn-terra" id="s2btn" disabled onclick="goTo(3)">Ver análisis de imagen →</button>
  </div>
</div>

<!-- ══ SCREEN 3: UPSCALE ENGINE ══ -->
<div class="screen" id="sc3">
  <div class="sh">Mejora tu imagen para imprimir</div>
  <p class="ss">Analizamos tu imagen, calculamos el upscale necesario y lo aplicamos en tiempo real.</p>

  <div class="engine-layout">

    <!-- LEFT: Analysis + options -->
    <div class="analysis-col">

      <div class="quality-card">
        <div class="q-title">Diagnóstico de calidad</div>
        <div class="q-row">
          <div class="q-lbl">Resolución <span id="qa-res-v" style="color:var(--ink)">—</span></div>
          <div class="q-bar-wrap"><div class="q-bar" id="qa-res-bar"></div></div>
        </div>
        <div class="q-row">
          <div class="q-lbl">DPI efectivo <span id="qa-dpi-v" style="color:var(--ink)">—</span></div>
          <div class="q-bar-wrap"><div class="q-bar" id="qa-dpi-bar"></div></div>
        </div>
        <div class="q-row">
          <div class="q-lbl">Nitidez estimada <span id="qa-sh-v" style="color:var(--ink)">—</span></div>
          <div class="q-bar-wrap"><div class="q-bar" id="qa-sh-bar"></div></div>
        </div>
        <div class="q-row">
          <div class="q-lbl">Listo para imprimir <span id="qa-pr-v" style="color:var(--ink)">—</span></div>
          <div class="q-bar-wrap"><div class="q-bar" id="qa-pr-bar"></div></div>
        </div>
        <div id="qual-verdict" style="margin-top:12px;"></div>
      </div>

      <div class="scale-card">
        <div class="sc-label">Upscale recomendado</div>
        <div class="sc-big" id="rec-scale">4×</div>
        <div class="sc-sub" id="rec-sub">Para alcanzar 300 DPI en tu producto</div>
        <div class="sc-pills">
          <div class="sc-pill" onclick="forceScale(this,1)">1×</div>
          <div class="sc-pill" onclick="forceScale(this,2)">2×</div>
          <div class="sc-pill on" onclick="forceScale(this,4)">4×</div>
          <div class="sc-pill locked" title="Pro plan">8×🔒</div>
        </div>
        <div style="margin-top:10px;font-size:11px;color:rgba(247,244,239,.35);">8× y 10× en plan Pro → <span style="color:rgba(201,79,42,.7);cursor:pointer;" onclick="toast(&#39;Próximamente: plan Pro con 8× y 10×&#39;)">Actualizar</span></div>
      </div>

      <div class="card">
        <div class="ph">⚙ Opciones</div>
        <div class="pb">
          <div class="tog-row" onclick="togBg()">
            <div><div style="font-size:13px;font-weight:500;">Eliminar fondo</div><div style="font-size:11px;color:var(--muted);">PNG con transparencia</div></div>
            <div class="tog-sw" id="tog-bg"><div class="tog-knob"></div></div>
          </div>
          <div id="bg-warn" style="display:none;" class="al al-info">🎨 Fondo se eliminará · Salida en PNG</div>
          <div class="divline"></div>
          <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--muted);margin-bottom:7px;">DPI de salida</div>
          <div style="display:flex;gap:7px;">
            <button class="btn btn-outline btn-sm" id="dpi150" onclick="selDpi(this,150)">150</button>
            <button class="btn btn-ink btn-sm" id="dpi300" onclick="selDpi(this,300)">300</button>
            <button class="btn btn-outline btn-sm" id="dpi600" onclick="selDpi(this,600)">600</button>
          </div>
          <div style="font-size:11px;color:var(--muted);font-style:italic;" id="dpi-hint">300 DPI — estándar para la mayoría de productos de impresión</div>
        </div>
      </div>

      <div id="engine-alerts" style="display:flex;flex-direction:column;gap:8px;"></div>
    </div>

    <!-- RIGHT: Compare + Mockup editor -->
    <div style="display:flex;flex-direction:column;gap:16px;">

      <!-- ★ THE HERO FEATURE: Before/After ★ -->
      <div class="compare-card">
        <div class="compare-toolbar">
          <div>
            <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:17px;font-weight:600;">Antes vs Después</div>
            <div style="font-size:11px;color:var(--muted);">Arrastra el divisor · Upscale real con Real-ESRGAN AI</div>
          </div>
          <div class="mode-tabs">
            <div class="mtab on" onclick="setView(this,&#39;split&#39;)">Dividido</div>
            <div class="mtab" onclick="setView(this,&#39;before&#39;)">Original</div>
            <div class="mtab" onclick="setView(this,&#39;after&#39;)">Mejorado</div>
          </div>
          <button class="btn btn-terra btn-sm" onclick="runRealESRGAN()" id="upscale-btn">⚡ Mejorar ahora</button>
        </div>

        <div class="compare-stage" id="compare-stage">
          <div class="cs cs-after" id="cs-after"><img id="img-after" src="" alt="enhanced"></div>
          <div class="cs cs-before" id="cs-before"><img id="img-before" src="" alt="original"></div>
          <div class="cmp-line" id="cmp-line"><div class="cmp-handle" id="cmp-handle">⇔</div></div>
          <div class="cmp-chip chip-b">ORIGINAL · <span id="chip-orig">—</span></div>
          <div class="cmp-chip chip-a">MEJORADO · <span id="chip-new">—</span></div>
          <div class="dpi-ov">
            <div class="dpi-row">Antes: <span id="dpi-bef" style="color:#ffd700;">— DPI</span></div>
            <div class="dpi-row">Después: <span id="dpi-aft" style="color:#4ade80;">— DPI</span></div>
          </div>
          <!-- Not processed overlay -->
          <div class="not-proc" id="not-proc">
            <div style="font-size:44px;">🔍</div>
            <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:22px;color:var(--warm);font-weight:300;">La comparación aparece aquí</div>
            <div style="font-size:13px;color:rgba(247,244,239,.5);">Presiona el botón para ver la diferencia real</div>
            <button class="btn btn-terra" onclick="runRealESRGAN()" style="margin-top:4px;">⚡ Mejorar imagen ahora</button>
          </div>
        </div>

        <div class="out-bar">
          <div class="out-s"><div class="out-l">Res. original</div><div class="out-v" id="os-orig">—</div><div class="out-sub">pixeles fuente</div></div>
          <div class="out-s"><div class="out-l">Res. mejorada</div><div class="out-v v-ok" id="os-new">—</div><div class="out-sub" id="os-scale-l">—</div></div>
          <div class="out-s"><div class="out-l">DPI final</div><div class="out-v" id="os-dpi">—</div><div class="out-sub" id="os-dpi-s">—</div></div>
        </div>
      </div>

      <!-- Mockup editor (compact) -->
      <div class="canvas-wrap">
        <div class="canvas-bar">
          <span class="ci" id="canvas-ci">Mockup — posiciona tu diseño</span>
          <div style="display:flex;align-items:center;gap:6px;">
            <div class="tog-row" onclick="togGuides()" style="padding:6px 10px;border-radius:7px;background:var(--warm);gap:6px;font-size:11px;cursor:pointer;">
              <span style="color:var(--muted2);font-weight:500;">Guías</span>
              <div class="tog-sw on" id="tog-guides" style="width:32px;height:18px;"><div class="tog-knob" style="width:14px;height:14px;"></div></div>
            </div>
            <div class="z-row">
              <button class="zb" onclick="zOut()">−</button>
              <span class="zlbl" id="zlbl">100%</span>
              <button class="zb" onclick="zIn()">+</button>
            </div>
          </div>
        </div>
        <div style="display:grid;grid-template-columns:170px 1fr;min-height:360px;">
          <div style="border-right:1px solid rgba(26,22,18,.07);padding:14px;display:flex;flex-direction:column;gap:11px;">
            <div class="sl-g">
              <div class="sl-l">Tamaño <span class="sl-v" id="v-sz">60%</span></div>
              <input type="range" min="5" max="200" value="60" id="r-sz" oninput="applySize(this.value)">
            </div>
            <div class="sl-g">
              <div class="sl-l">Rotar <span class="sl-v" id="v-rt">0°</span></div>
              <input type="range" min="-180" max="180" value="0" id="r-rt" oninput="applyRot(this.value)">
            </div>
            <div class="sl-g">
              <div class="sl-l">Opacidad <span class="sl-v" id="v-op">100%</span></div>
              <input type="range" min="10" max="100" value="100" id="r-op" oninput="applyOp(this.value)">
            </div>
            <div class="divline"></div>
            <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--muted);margin-bottom:4px;">Alinear</div>
            <div class="align-g">
              <div class="ag" onclick="doAlign(&#39;tl&#39;)">↖</div>
              <div class="ag" onclick="doAlign(&#39;tc&#39;)">↑</div>
              <div class="ag" onclick="doAlign(&#39;tr&#39;)">↗</div>
              <div class="ag" onclick="doAlign(&#39;cl&#39;)">←</div>
              <div class="ag on" onclick="doAlign(&#39;cc&#39;)">⊕</div>
              <div class="ag" onclick="doAlign(&#39;cr&#39;)">→</div>
              <div class="ag" onclick="doAlign(&#39;bl&#39;)">↙</div>
              <div class="ag" onclick="doAlign(&#39;bc&#39;)">↓</div>
              <div class="ag" onclick="doAlign(&#39;br&#39;)">↘</div>
            </div>
            <div class="divline"></div>
            <button class="btn btn-outline btn-sm" style="font-size:11px;" onclick="resetDesign()">↺ Resetear</button>
          </div>
          <div class="canvas-stage" id="canvas-stage"></div>
        </div>
      </div>

    </div>
  </div>

  <div class="nav-actions">
    <button class="btn btn-outline" onclick="goTo(2)">← Volver</button>
    <button class="btn btn-terra btn-lg" onclick="startProc()">✓ Generar archivo final →</button>
  </div>
</div>

<!-- PROCESSING -->
<div class="proc-wrap" id="proc-wrap">
  <div style="font-size:48px;display:block;margin-bottom:20px;animation:spin 3s linear infinite;">⚙</div>
  <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:30px;font-weight:300;margin-bottom:6px;">Generando tu archivo…</div>
  <div style="font-size:13px;color:var(--muted);margin-bottom:28px;font-weight:300;" id="proc-info">Procesando</div>
  <div class="pbar-wrap"><div class="pbar-fill" id="pbar"></div></div>
  <div style="font-family:&#39;JetBrains Mono&#39;,monospace;font-size:13px;color:var(--terra);" id="ppct">0%</div>
  <div style="font-size:12px;color:var(--muted);font-style:italic;margin-top:5px;" id="pmsg">Inicializando…</div>
  <div class="plog">
    <div class="pl" id="pl1"><div class="pl-dot"></div>Analizando estructura de píxeles</div>
    <div class="pl" id="pl2"><div class="pl-dot"></div>Ejecutando upscale neural (Real-ESRGAN)</div>
    <div class="pl" id="pl3"><div class="pl-dot"></div>Mejorando bordes y texturas</div>
    <div class="pl" id="pl4"><div class="pl-dot"></div>Eliminando fondo con rembg</div>
    <div class="pl" id="pl5"><div class="pl-dot"></div>Aplicando posición en producto</div>
    <div class="pl" id="pl6"><div class="pl-dot"></div>Codificando archivo final</div>
  </div>
</div>

<!-- ══ SCREEN 4: RESULT ══ -->
<div class="screen" id="sc4">
  <div class="sh">Archivo listo para imprimir <em style="font-style:italic;color:var(--terra)">✓</em></div>
  <p class="ss" id="r-sub">Optimizado · 300 DPI · PNG</p>

  <div class="result-layout">
    <div>
      <!-- Final before/after -->
      <div style="background:var(--card);border-radius:16px;overflow:hidden;box-shadow:var(--s3);margin-bottom:16px;">
        <div style="padding:12px 18px;border-bottom:1px solid rgba(26,22,18,.07);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px;">
          <div style="font-size:13px;color:var(--muted);">Comparación final — arrastra para comparar</div>
          <div class="mode-tabs">
            <div class="mtab on" onclick="setRView(this,&#39;split&#39;)">Dividido</div>
            <div class="mtab" onclick="setRView(this,&#39;before&#39;)">Original</div>
            <div class="mtab" onclick="setRView(this,&#39;after&#39;)">Mejorado</div>
          </div>
        </div>
        <div class="compare-stage" id="r-compare-stage" style="height:340px;">
          <div class="cs cs-after" id="r-cs-after"><img id="r-img-after" src="" alt="enhanced"></div>
          <div class="cs cs-before" id="r-cs-before"><img id="r-img-before" src="" alt="original"></div>
          <div class="cmp-line" id="r-cmp-line"><div class="cmp-handle" id="r-cmp-handle">⇔</div></div>
          <div class="cmp-chip chip-b">ORIGINAL · <span id="r-chip-orig">—</span></div>
          <div class="cmp-chip chip-a">MEJORADO · <span id="r-chip-new">—</span></div>
        </div>
      </div>

      <div class="stat-g">
        <div class="sbox"><div class="slbl">Res. final</div><div class="sval" id="r-res">—</div><div class="ssub" id="r-res-s">—</div></div>
        <div class="sbox"><div class="slbl">DPI</div><div class="sval" id="r-dpi">300</div><div class="ssub">listo para impresión</div></div>
        <div class="sbox"><div class="slbl">Tamaño físico</div><div class="sval" id="r-phys">—</div><div class="ssub" id="r-preset-s">—</div></div>
        <div class="sbox"><div class="slbl">Upscale</div><div class="sval" id="r-scale">—</div><div class="ssub">mejora aplicada</div></div>
      </div>
    </div>

    <div style="display:flex;flex-direction:column;gap:12px;">
      <div id="r-alerts"></div>
      <div class="dl-box">
        <div class="dl-tabs">
          <div class="dl-tab on" onclick="selFmt(this,&#39;PNG&#39;)">PNG</div>
          <div class="dl-tab" id="jpg-tab" onclick="selFmt(this,&#39;JPG&#39;)">JPG</div>
          <div class="dl-tab" onclick="selFmt(this,&#39;WEBP&#39;)">WEBP</div>
          <div class="dl-tab off" onclick="toast(&#39;TIFF requiere plan Ultra&#39;)">TIFF</div>
        </div>
        <div class="dl-body">
          <div class="real-badge">✅ Upscale real aplicado · Real-ESRGAN AI</div>
          <div class="dl-note" id="dl-note">PNG — sin pérdida de calidad, soporta transparencia. Ideal para impresión profesional.</div>
          <button class="btn btn-terra btn-lg btn-full" id="dl-btn" onclick-gate="download" onclick="downloadResult()">⬇ Descargar archivo mejorado</button>
          <button class="btn btn-outline btn-full" onclick="toast(&#39;🔗 Enlace copiado al portapapeles&#39;)">Compartir enlace</button>
        </div>
      </div>

      <div class="card">
        <div class="ph">✅ Checklist de impresión</div>
        <div class="pb" id="r-checklist"></div>
      </div>

      <button class="btn btn-outline btn-full" onclick="resetAll()">↩ Procesar otra imagen</button>
    </div>
  </div>
</div>

<div class="toast" id="toast-el"></div>

<script>
/* ════════════════════════════════════
   PRESETS DB
════════════════════════════════════ */
const PRESETS=[
  {id:'tshirt-front',cat:'apparel',ico:'👕',name:'Camiseta Frente',w:28,h:34,dpi:300,bleed:false,transp:true,shirt:true,pl:'front',note:'DTG frontal'},
  {id:'tshirt-back',cat:'apparel',ico:'↩',name:'Camiseta Espalda',w:28,h:34,dpi:300,bleed:false,transp:true,shirt:true,pl:'back',note:'DTG espalda'},
  {id:'tshirt-chest',cat:'apparel',ico:'◈',name:'Camiseta Pecho',w:10,h:10,dpi:300,bleed:false,transp:true,shirt:true,pl:'left-chest',note:'Pecho izq.'},
  {id:'mug-std',cat:'mug',ico:'☕',name:'Mug Estándar',w:20,h:9,dpi:300,bleed:false,transp:true,note:'11oz wrap'},
  {id:'mug-magic',cat:'mug',ico:'🪄',name:'Mug Mágico',w:20,h:9,dpi:300,bleed:false,transp:true,note:'Color-change'},
  {id:'poster-a3',cat:'poster',ico:'🖼',name:'Póster A3',w:29.7,h:42,dpi:300,bleed:true,transp:false,note:'+3mm bleed'},
  {id:'poster-30x40',cat:'poster',ico:'🗓',name:'Póster 30×40',w:30,h:40,dpi:300,bleed:true,transp:false,note:'Marco estándar'},
  {id:'poster-50x70',cat:'poster',ico:'🖼',name:'Póster 50×70',w:50,h:70,dpi:150,bleed:true,transp:false,note:'150 DPI ok'},
  {id:'letter',cat:'paper',ico:'📄',name:'Carta (Letter)',w:21.59,h:27.94,dpi:300,bleed:false,transp:false,note:'US Letter'},
  {id:'half-letter',cat:'paper',ico:'📋',name:'Media Carta',w:13.97,h:21.59,dpi:300,bleed:false,transp:false,note:'Half Letter'},
  {id:'sticker',cat:'other',ico:'🔵',name:'Sticker 3"',w:7.6,h:7.6,dpi:300,bleed:true,transp:true,note:'Die-cut +bleed'},
  {id:'custom',cat:'other',ico:'⚙',name:'Personalizado',w:null,h:null,dpi:300,bleed:false,transp:false,note:'Medidas propias'},
];
const SIZES={XS:{w:23,h:30},S:{w:25,h:32},M:{w:28,h:34},L:{w:30,h:36},XL:{w:32,h:38},'2XL':{w:34,h:40}};

/* ════════════════════════════════════
   STATE
════════════════════════════════════ */
const ST={
  src:null,imgW:0,imgH:0,fileBytes:0,file:null,
  originalURL:null,enhancedURL:null,beforeURL:null,
  preset:null,shirtSz:'M',placement:'front',
  bgRemove:false,guides:true,dpi:300,scale:4,
  zoom:1,fmt:'PNG',upscaleDone:false,
  drag:{on:false},rsz:{on:false},_a:null
};
// Asegurar que ST esté disponible globalmente
window.ST = ST;

/* ════════════════════════════════════
   UTILS
════════════════════════════════════ */
function fmtBytes(b){return b>1048576?(b/1048576).toFixed(1)+' MB':Math.round(b/1024)+' KB';}
let _tt;
function toast(msg){const e=document.getElementById('toast-el');e.textContent=msg;e.classList.add('show');clearTimeout(_tt);_tt=setTimeout(()=>e.classList.remove('show'),3200);}

/* ════════════════════════════════════
   UPLOAD
════════════════════════════════════ */
function handleFile(e){if(e.target.files[0])loadImg(e.target.files[0]);}
function dropFile(e){e.preventDefault();document.getElementById('upload-zone').classList.remove('over');if(e.dataTransfer.files[0])loadImg(e.dataTransfer.files[0]);}
function loadImg(file){
  // Asegurar que ST esté disponible globalmente
  if (!window.ST) window.ST = ST;
  
  ST.fileBytes=file.size;
  // CRÍTICO: Guardar el archivo original sin comprimir
  // Este es el archivo que se debe usar para Real-ESRGAN
  ST.file=file;
  window.ST.file = file; // También en window.ST para asegurar persistencia
  console.log('💾 Archivo original guardado en ST.file:', {
    name: file.name,
    size: file.size,
    type: file.type,
    sizeKB: Math.round(file.size / 1024) + ' KB'
  });
  
  console.log('Imagen cargada:', {
    fileName: file.name,
    fileSize: file.size,
    hasFile: !!ST.file,
    hasWindowST: !!window.ST
  });
  
  const r=new FileReader();
  r.onload=ev=>{
    const img=new Image();
    img.onload=()=>{
      ST.imgW=img.naturalWidth;ST.imgH=img.naturalHeight;
      ST.src=ev.target.result;ST.originalURL=ev.target.result;
      // Sincronizar con window.ST
      window.ST.src = ev.target.result;
      window.ST.originalURL = ev.target.result;
      window.ST.imgW = img.naturalWidth;
      window.ST.imgH = img.naturalHeight;
      window.ST.file = file; // Asegurar que file también esté en window.ST
      ST.upscaleDone=false;ST.enhancedURL=null;
      const mp=(ST.imgW*ST.imgH)/1e6;
      const qual=mp<0.1?'Muy baja (<0.1MP)':mp<0.5?'Baja (<0.5MP)':mp<2?'Media':'Buena (>2MP)';
      document.getElementById('upload-zone').style.display='none';
      const uc=document.getElementById('uc-card');uc.style.display='block';
      document.getElementById('prev-img').src=ev.target.result;
      document.getElementById('m-name').textContent=file.name.slice(0,18)+(file.name.length>18?'…':'');
      document.getElementById('m-dims').textContent=`${ST.imgW} × ${ST.imgH} px`;
      document.getElementById('m-size').textContent=fmtBytes(file.size);
      document.getElementById('m-fmt').textContent=file.type.split('/')[1].toUpperCase();
      document.getElementById('m-qual').textContent=qual;
      document.getElementById('restart-btn').style.display='flex';
    };
    img.src=ev.target.result;
  };
  r.readAsDataURL(file);
}

/* ════════════════════════════════════
   PRODUCT GRID
════════════════════════════════════ */
function filterCat(el,cat){document.querySelectorAll('.ctab').forEach(t=>t.classList.remove('on'));el.classList.add('on');buildGrid(cat);}
function buildGrid(cat='all'){
  const g=document.getElementById('preset-grid');g.innerHTML='';
  PRESETS.filter(p=>cat==='all'||p.cat===cat).forEach(p=>{
    const d=document.createElement('div');d.className='pc';d.dataset.id=p.id;
    d.innerHTML=`<span class="pc-ico">${p.ico}</span><div class="pc-name">${p.name}</div>
    <div class="pc-dims">${p.w?p.w+'×'+p.h+' cm':'Medida propia'}</div>
    <div class="pc-dpi">${p.dpi} DPI${p.transp?' · transp.':''}${p.bleed?' · +bleed':''}</div>`;
    d.onclick=()=>selPreset(p.id);
    g.appendChild(d);
  });
}
function selPreset(id){
  ST.preset=PRESETS.find(p=>p.id===id);
  document.querySelectorAll('.pc').forEach(c=>c.classList.remove('on'));
  document.querySelector(`.pc[data-id="${id}"]`)?.classList.add('on');
  document.getElementById('shirt-cfg').classList.toggle('show',!!ST.preset.shirt);
  document.getElementById('s2btn').disabled=false;
  updSzInfo();ST.upscaleDone=false;
}
function selSz(el,sz){ST.shirtSz=sz;document.querySelectorAll('.sz').forEach(b=>b.classList.remove('on'));el.classList.add('on');const sd=SIZES[sz];if(ST.preset?.shirt){ST.preset.w=sd.w;ST.preset.h=sd.h;}updSzInfo();}
function updSzInfo(){
  if(!ST.preset)return;
  const sd=ST.preset.shirt?(SIZES[ST.shirtSz]||{w:ST.preset.w,h:ST.preset.h}):{w:ST.preset.w||20,h:ST.preset.h||20};
  if(!sd.w)return;
  const nW=Math.round(sd.w*0.3937*300),nH=Math.round(sd.h*0.3937*300);
  document.getElementById('sz-info').textContent=`${ST.shirtSz} — Área: ${sd.w}×${sd.h}cm · 300 DPI · ${nW.toLocaleString()}×${nH.toLocaleString()}px requeridos`;
}
function selPl(el,p){ST.placement=p;document.querySelectorAll('.pl-btn').forEach(b=>b.classList.remove('on'));el.classList.add('on');}

/* ════════════════════════════════════
   NAVIGATION
════════════════════════════════════ */
function goTo(n){
  document.querySelectorAll('.screen,.proc-wrap').forEach(s=>s.classList.remove('act'));
  for(let i=1;i<=4;i++){
    const si=document.getElementById(`si${i}`);
    si.classList.remove('act','done');
    if(i<n)si.classList.add('done');else if(i===n)si.classList.add('act');
  }
  const sc=document.getElementById(`sc${n}`);if(sc)sc.classList.add('act');
  if(n===2)buildGrid();
  if(n===3){buildAnalysis();initCompare();buildEditor();}
  window.scrollTo({top:0,behavior:'smooth'});
}

/* ════════════════════════════════════
   ANALYSIS
════════════════════════════════════ */
function buildAnalysis(){
  if(!ST.preset||!ST.imgW)return;
  const p=ST.preset;
  const sd=p.shirt?(SIZES[ST.shirtSz]||{w:p.w,h:p.h}):{w:p.w||20,h:p.h||20};
  const I=2.54;
  const nW=Math.round(sd.w/I*ST.dpi),nH=Math.round(sd.h/I*ST.dpi);
  const curDpi=Math.round(Math.min(ST.imgW/((sd.w||20)/I),ST.imgH/((sd.h||20)/I)));
  const ratio=Math.max(nW/(ST.imgW||1),nH/(ST.imgH||1));
  const recScale=ratio<=1?1:ratio<=2?2:ratio<=4?4:8;
  ST.scale=Math.min(recScale,4); // cap at 4 for free

  const resPct=Math.min(100,Math.round((ST.imgW*ST.imgH)/(nW*nH)*100));
  const dpiPct=Math.min(100,Math.round(curDpi/ST.dpi*100));
  const shPct=Math.min(100,Math.round(resPct*.7+dpiPct*.3));
  const prPct=Math.min(100,Math.round(dpiPct*.6+resPct*.4));

  function setBar(vid,bid,pct){
    document.getElementById(vid).textContent=pct+'%';
    const bar=document.getElementById(bid);
    bar.style.width='0%';
    setTimeout(()=>{bar.style.width=pct+'%';bar.className='q-bar '+(pct>=70?'qb-ok':pct>=40?'qb-warn':'qb-bad');},120);
  }
  setBar('qa-res-v','qa-res-bar',resPct);
  setBar('qa-dpi-v','qa-dpi-bar',dpiPct);
  setBar('qa-sh-v','qa-sh-bar',shPct);
  setBar('qa-pr-v','qa-pr-bar',prPct);

  let verdict;
  if(dpiPct>=85)verdict=`<div class="al al-ok">✅ <strong>Resolución excelente.</strong> Tu imagen tiene calidad suficiente. El upscale afinará los detalles adicionales.</div>`;
  else if(dpiPct>=50)verdict=`<div class="al al-warn">⚠️ <strong>Resolución insuficiente.</strong> La imagen es pequeña para este producto. El upscale ${ST.scale}× recuperará la calidad necesaria para impresión.</div>`;
  else verdict=`<div class="al al-bad">❌ <strong>Resolución muy baja.</strong> La imagen está muy por debajo del mínimo. Aplicaremos el máximo upscale disponible (${ST.scale}×). Los resultados dependerán de la fuente.</div>`;
  document.getElementById('qual-verdict').innerHTML=verdict;

  document.getElementById('rec-scale').textContent=ST.scale+'×';
  document.getElementById('rec-sub').textContent=`Para alcanzar ${ST.dpi} DPI en ${p.name}`;
  document.querySelectorAll('.sc-pill:not(.locked)').forEach(pill=>{
    const v=parseInt(pill.textContent);pill.classList.toggle('on',v===ST.scale);
  });

  const outW=ST.imgW*ST.scale,outH=ST.imgH*ST.scale;
  const outDpi=Math.round(Math.min(outW/((sd.w||20)/I),outH/((sd.h||20)/I)));
  document.getElementById('os-orig').textContent=`${ST.imgW}×${ST.imgH}`;
  document.getElementById('os-new').textContent=`${outW.toLocaleString()}×${outH.toLocaleString()}`;
  document.getElementById('os-scale-l').textContent=`${ST.scale}× upscale`;
  document.getElementById('os-dpi').textContent=outDpi;
  document.getElementById('os-dpi-s').textContent=outDpi>=ST.dpi?'✅ Suficiente':'⚠ Mejorado';
  document.getElementById('chip-orig').textContent=`${ST.imgW}×${ST.imgH}`;
  document.getElementById('chip-new').textContent=`${outW.toLocaleString()}×${outH.toLocaleString()}`;
  document.getElementById('dpi-bef').textContent=curDpi+' DPI';
  document.getElementById('dpi-aft').textContent=outDpi+' DPI';

  // R result chips
  document.getElementById('r-chip-orig').textContent=`${ST.imgW}×${ST.imgH}`;
  document.getElementById('r-chip-new').textContent=`${outW.toLocaleString()}×${outH.toLocaleString()}`;

  const alerts=[];
  if(p.transp&&!ST.bgRemove)alerts.push(`<div class="al al-info">💡 Para <strong>${p.name}</strong> se recomienda activar "Eliminar fondo".</div>`);
  if(p.bleed)alerts.push(`<div class="al al-warn">📐 Bleed +3mm se añadirá automáticamente al exportar.</div>`);
  document.getElementById('engine-alerts').innerHTML=alerts.join('');
  document.getElementById('canvas-ci').textContent=`${p.name}${p.shirt?' · '+ST.shirtSz:''} · ${sd.w}×${sd.h}cm`;
  ST._a={recScale:ST.scale,outW,outH,curDpi,outDpi,dpiPct,resPct,nW,nH,sd};
}

/* ════════════════════════════════════
   COMPARE SLIDER SETUP
════════════════════════════════════ */
function initCompare(){
  document.getElementById('img-before').src=ST.originalURL||'';
  document.getElementById('img-after').src=ST.enhancedURL||ST.originalURL||'';
  if(!ST.upscaleDone){
    document.getElementById('not-proc').style.display='flex';
    document.getElementById('img-before').style.filter='blur(2px) contrast(.85)';
    document.getElementById('img-after').style.filter='blur(2px) contrast(.85)';
  }
  setupSlider('compare-stage','cs-before','cmp-line');
  setupSlider('r-compare-stage','r-cs-before','r-cmp-line');
}
function setupSlider(stageId,beforeId,lineId){
  const stage=document.getElementById(stageId);
  const before=document.getElementById(beforeId);
  const line=document.getElementById(lineId);
  if(!stage||!before||!line)return;
  let drag=false;
  stage.addEventListener('mousedown',()=>drag=true);
  window.addEventListener('mouseup',()=>drag=false);
  stage.addEventListener('mousemove',e=>{
    if(!drag)return;
    const r=stage.getBoundingClientRect();
    const x=Math.max(5,Math.min(95,((e.clientX-r.left)/r.width)*100));
    before.style.clipPath=`inset(0 ${100-x}% 0 0)`;
    line.style.left=x+'%';
  });
  stage.addEventListener('touchmove',e=>{
    e.preventDefault();
    const r=stage.getBoundingClientRect();
    const x=Math.max(5,Math.min(95,((e.touches[0].clientX-r.left)/r.width)*100));
    before.style.clipPath=`inset(0 ${100-x}% 0 0)`;
    line.style.left=x+'%';
  },{passive:false});
}
function setView(el,v){
  el.closest('.mode-tabs').querySelectorAll('.mtab').forEach(t=>t.classList.remove('on'));el.classList.add('on');
  const b=document.getElementById('cs-before'),l=document.getElementById('cmp-line');
  if(v==='split'){b.style.clipPath='inset(0 50% 0 0)';l.style.display='';}
  else if(v==='before'){b.style.clipPath='inset(0 0 0 0)';l.style.display='none';}
  else{b.style.clipPath='inset(0 100% 0 0)';l.style.display='none';}
}
function setRView(el,v){
  el.closest('.mode-tabs').querySelectorAll('.mtab').forEach(t=>t.classList.remove('on'));el.classList.add('on');
  const b=document.getElementById('r-cs-before'),l=document.getElementById('r-cmp-line');
  if(v==='split'){b.style.clipPath='inset(0 50% 0 0)';l.style.display='';}
  else if(v==='before'){b.style.clipPath='inset(0 0 0 0)';l.style.display='none';}
  else{b.style.clipPath='inset(0 100% 0 0)';l.style.display='none';}
}

/* ════════════════════════════════════
   REAL UPSCALE ENGINE
   Canvas API + multi-step + sharpening
   → In production: call Replicate Real-ESRGAN API
════════════════════════════════════ */
function runUpscale(){
  if(!ST.src){toast('Primero sube una imagen');return;}
  const btn=document.getElementById('upscale-btn');
  btn.disabled=true;btn.textContent='⏳ Procesando…';
  document.getElementById('not-proc').innerHTML=`
    <div style="font-size:36px;animation:spin 1s linear infinite;display:block;">⚙</div>
    <div style="font-family:'Cormorant Garamond',serif;font-size:20px;color:var(--warm);font-weight:300;margin-top:10px;">Aplicando upscale ${ST.scale}×…</div>
    <div style="font-size:12px;color:rgba(247,244,239,.5);margin-top:4px;">Mejorando resolución, nitidez y detalles</div>`;
  setTimeout(processCanvas,80);
}

function processCanvas(){
  const scale=ST.scale;
  const srcImg=new Image();
  srcImg.onload=()=>{
    const oW=srcImg.naturalWidth,oH=srcImg.naturalHeight;
    const tW=oW*scale,tH=oH*scale;

    /* ── BEFORE: intentionally pixelated ── */
    const cbef=document.getElementById('wc-before');
    cbef.width=oW;cbef.height=oH;
    const cxb=cbef.getContext('2d');
    const smW=Math.max(1,Math.round(oW/scale)),smH=Math.max(1,Math.round(oH/scale));
    const tmp=document.createElement('canvas');tmp.width=smW;tmp.height=smH;
    tmp.getContext('2d').drawImage(srcImg,0,0,smW,smH);
    cxb.imageSmoothingEnabled=false;
    cxb.drawImage(tmp,0,0,oW,oH);
    ST.beforeURL=cbef.toDataURL('image/jpeg',.85);

    /* ── AFTER: multi-step high quality upscale ── */
    const caft=document.getElementById('wc-after');
    caft.width=tW;caft.height=tH;
    const cxa=caft.getContext('2d');
    cxa.imageSmoothingEnabled=true;
    cxa.imageSmoothingQuality='high';

    // Multi-step: avoids single huge jump artifacts
    const steps=scale<=2?1:scale<=4?2:3;
    let cur=document.createElement('canvas');cur.width=oW;cur.height=oH;
    cur.getContext('2d').drawImage(srcImg,0,0);
    let cW=oW,cH=oH;
    for(let s=0;s<steps;s++){
      const stepScale=Math.pow(scale,1/steps);
      const nW=s===steps-1?tW:Math.round(cW*stepScale);
      const nH=s===steps-1?tH:Math.round(cH*stepScale);
      const nc=document.createElement('canvas');nc.width=nW;nc.height=nH;
      const nx=nc.getContext('2d');nx.imageSmoothingEnabled=true;nx.imageSmoothingQuality='high';
      nx.drawImage(cur,0,0,nW,nH);
      // Sharpening pass (stronger on final step)
      applySharpening(nx,nW,nH,s===steps-1?1.5:1.15);
      cur=nc;cW=nW;cH=nH;
    }
    // Final composite with slight contrast/saturation boost
    cxa.drawImage(cur,0,0,tW,tH);
    boostVibrancy(cxa,tW,tH);

    ST.enhancedURL=caft.toDataURL('image/png');
    ST.upscaleDone=true;
    // Marcar que estamos usando el motor estándar (no IA)
    ST.usingStandardEngine = true;
    ST.usingAIEngine = false;
    console.log('⚠️ Usando motor estándar (Canvas) - solo aumenta tamaño, no mejora calidad real');
    showUpscaleResult();
  };
  srcImg.src=ST.originalURL;
}

// Unsharp mask via convolution
function applySharpening(ctx,w,h,strength){
  try{
    if(w*h>8000000)return; // skip for very large canvases (perf)
    const id=ctx.getImageData(0,0,w,h);
    const d=id.data;
    const k=[-strength/8,-strength/8,-strength/8,-strength/8,strength+1,-strength/8,-strength/8,-strength/8,-strength/8];
    const s=new Uint8ClampedArray(d);
    for(let y=1;y<h-1;y++){
      for(let x=1;x<w-1;x++){
        const i=(y*w+x)*4;
        for(let c=0;c<3;c++){
          let v=0;
          for(let ky=-1;ky<=1;ky++)for(let kx=-1;kx<=1;kx++){
            v+=s[((y+ky)*w+(x+kx))*4+c]*k[(ky+1)*3+(kx+1)];
          }
          d[i+c]=Math.max(0,Math.min(255,v));
        }
      }
    }
    ctx.putImageData(id,0,0);
  }catch(e){}
}

// Subtle saturation + contrast boost
function boostVibrancy(ctx,w,h){
  try{
    if(w*h>8000000)return;
    const id=ctx.getImageData(0,0,w,h);
    const d=id.data;
    const sat=1.08,con=1.04,bright=2;
    for(let i=0;i<d.length;i+=4){
      // contrast
      for(let c=0;c<3;c++) d[i+c]=Math.max(0,Math.min(255,((d[i+c]-128)*con)+128+bright));
      // saturation
      const avg=(d[i]+d[i+1]+d[i+2])/3;
      d[i]=Math.max(0,Math.min(255,avg+(d[i]-avg)*sat));
      d[i+1]=Math.max(0,Math.min(255,avg+(d[i+1]-avg)*sat));
      d[i+2]=Math.max(0,Math.min(255,avg+(d[i+2]-avg)*sat));
    }
    ctx.putImageData(id,0,0);
  }catch(e){}
}

function showUpscaleResult(){
  const a=ST._a;
  // Update compare
  document.getElementById('img-before').src=ST.beforeURL;
  document.getElementById('img-before').style.filter='none';
  document.getElementById('img-after').src=ST.enhancedURL;
  document.getElementById('img-after').style.filter='none';
  document.getElementById('r-img-before').src=ST.beforeURL;
  document.getElementById('r-img-after').src=ST.enhancedURL;

  document.getElementById('not-proc').style.display='none';
  // Update mockup with enhanced image
  const de=document.getElementById('design-el');
  if(de)de.querySelector('img').src=ST.enhancedURL;

  const btn=document.getElementById('upscale-btn');
  btn.disabled=false;btn.textContent='✓ Mejorado — repetir';
  
  // Mostrar mensaje según el motor usado
  if (ST.usingStandardEngine) {
    toast(`⚠️ ${ST.scale}× completado (motor estándar) · ${a?.outW?.toLocaleString()}×${a?.outH?.toLocaleString()}px · Solo aumenta tamaño, no mejora calidad real. Para mejor calidad, usa Real-ESRGAN (requiere créditos).`, 6000);
  } else {
    toast(`✅ ${ST.scale}× completado · ${a?.outW?.toLocaleString()}×${a?.outH?.toLocaleString()}px`);
  }
}

/* ════════════════════════════════════
   MOCKUP EDITOR
════════════════════════════════════ */
function buildEditor(){
  if(!ST.preset||!ST.src)return;
  const p=ST.preset;
  const sd=p.shirt?(SIZES[ST.shirtSz]||{w:p.w,h:p.h}):{w:p.w||20,h:p.h||20};
  const stage=document.getElementById('canvas-stage');
  stage.innerHTML='';
  const imgSrc=ST.enhancedURL||ST.src;
  if(p.cat==='mug'||p.id.startsWith('mug'))buildMug(stage,p,imgSrc);
  else if(p.cat==='apparel'||p.shirt)buildShirt(stage,p,sd,imgSrc);
  else buildFlat(stage,p,sd,imgSrc);
}

function mkDesign(zone,src){
  const el=document.createElement('div');el.className='de sel';el.id='design-el';
  el.style.cssText='position:absolute;width:60%;left:20%;top:15%;z-index:10;';
  const img=document.createElement('img');img.src=src;
  img.style.cssText='display:block;width:100%;height:100%;object-fit:contain;pointer-events:none;';
  el.appendChild(img);
  const rh=document.createElement('div');rh.className='rh';
  rh.addEventListener('mousedown',startRsz);rh.addEventListener('touchstart',startRsz,{passive:false});
  el.appendChild(rh);
  el.addEventListener('mousedown',startDrag);el.addEventListener('touchstart',startDrag,{passive:false});
  return el;
}

function buildShirt(stage,p,sd,imgSrc){
  const wrap=document.createElement('div');wrap.style.cssText='position:relative;display:inline-block;';
  const isBack=ST.placement==='back';
  wrap.innerHTML=`<svg width="300" height="360" viewBox="0 0 300 360" fill="none">
    <path d="M54 54L4 108L44 130L44 344L256 344L256 130L296 108L246 54L206 18Q150 46 94 18Z" fill="#eae6df" stroke="#ccc8be" stroke-width="1.5"/>
    <path d="M94 18Q150 48 206 18" fill="none" stroke="#b8b4aa" stroke-width="2"/>
    <line x1="150" y1="52" x2="150" y2="344" stroke="#d8d4ca" stroke-width=".4" opacity=".5"/>
    ${isBack?'<text x="150" y="188" text-anchor="middle" fill="#c0bcb2" font-size="10" font-family="serif" font-style="italic">espalda</text>':''}
  </svg>`;
  const zone=document.createElement('div');zone.className='print-zone';zone.id='print-zone';
  if(ST.bgRemove)zone.classList.add('checker');
  if(!ST.guides)zone.style.border='1.5px dashed transparent';
  const lbl=document.createElement('div');lbl.className='pz-lbl';lbl.textContent=`Área · ${sd.w}×${sd.h}cm`;
  if(!ST.guides)lbl.style.display='none';
  zone.appendChild(lbl);
  const pl=ST.placement;
  let s;
  if(pl==='left-chest')s={left:'80px',top:'72px',width:'68px',height:'68px'};
  else if(pl==='sleeve')s={left:'18px',top:'88px',width:'36px',height:'108px'};
  else{const zW=Math.round(300*.52),zL=Math.round((300-zW)/2);s={left:zL+'px',top:'72px',width:zW+'px',height:Math.round(360*.55)+'px'};}
  Object.assign(zone.style,s);
  zone.appendChild(mkDesign(zone,imgSrc));
  wrap.appendChild(zone);stage.appendChild(wrap);
  addLbl(stage,`Camiseta ${ST.shirtSz} · ${pl==='back'?'Espalda':pl==='front'?'Frente':'Pecho izq.'}`);
}

function buildMug(stage,p,imgSrc){
  const wrap=document.createElement('div');wrap.style.cssText='position:relative;display:inline-block;';
  wrap.innerHTML=`<svg width="320" height="232" viewBox="0 0 320 232" fill="none">
    <path d="M34 24Q34 194 34 204Q138 226 286 204Q286 194 286 24Q138 2 34 24Z" fill="#f5f1eb" stroke="#ddd8ce" stroke-width="1.5"/>
    <ellipse cx="160" cy="24" rx="126" ry="19" fill="#ede9e1" stroke="#ddd8ce" stroke-width="1.5"/>
    <path d="M286 62Q330 64 330 130Q330 196 286 186" fill="none" stroke="#c8c2b8" stroke-width="10" stroke-linecap="round"/>
    <ellipse cx="160" cy="204" rx="126" ry="17" fill="#e5e0d8" stroke="#ddd8ce" stroke-width="1"/>
  </svg>`;
  const zone=document.createElement('div');zone.className='print-zone';zone.id='print-zone';
  if(ST.bgRemove)zone.classList.add('checker');
  if(!ST.guides)zone.style.border='1.5px dashed transparent';
  Object.assign(zone.style,{left:'46px',top:'36px',width:'218px',height:'156px',borderRadius:'3px'});
  const lbl=document.createElement('div');lbl.className='pz-lbl';lbl.textContent=`Área · ${p.w}×${p.h}cm`;
  if(!ST.guides)lbl.style.display='none';
  zone.appendChild(lbl);zone.appendChild(mkDesign(zone,imgSrc));
  wrap.appendChild(zone);stage.appendChild(wrap);
  addLbl(stage,'Mug 11oz · Área wrap completo');
}

function buildFlat(stage,p,sd,imgSrc){
  const aspect=(sd.h||28)/(sd.w||20),baseW=260;
  const paper=document.createElement('div');
  paper.style.cssText=`width:${baseW}px;height:${Math.round(baseW*aspect)}px;background:white;box-shadow:0 4px 24px rgba(0,0,0,.12);border-radius:2px;position:relative;overflow:hidden;display:inline-block;`;
  if(p.bleed){
    const bpx=Math.round(baseW*.025);
    const bl=document.createElement('div');
    bl.style.cssText=`position:absolute;inset:${bpx}px;border:1px dashed rgba(201,79,42,.4);pointer-events:none;z-index:5;`;
    const blt=document.createElement('span');
    blt.style.cssText='position:absolute;top:-14px;left:0;font-size:9px;font-family:"JetBrains Mono",monospace;color:var(--terra);white-space:nowrap;';
    blt.textContent='Bleed +3mm';bl.appendChild(blt);paper.appendChild(bl);
  }
  const zone=document.createElement('div');zone.className='print-zone';zone.id='print-zone';
  zone.style.cssText='position:absolute;inset:0;border:none;';
  if(ST.bgRemove)zone.classList.add('checker');
  zone.appendChild(mkDesign(zone,imgSrc));paper.appendChild(zone);
  stage.appendChild(paper);
  addLbl(stage,`${p.name} · ${sd.w}×${sd.h}cm`);
}

function addLbl(stage,txt){
  const l=document.createElement('div');
  l.style.cssText='margin-top:9px;text-align:center;font-family:"JetBrains Mono",monospace;font-size:10px;color:var(--muted);';
  l.textContent=txt;stage.appendChild(l);
}

/* DRAG */
function startDrag(e){
  if(e.target.classList.contains('rh'))return;e.preventDefault();
  const el=getDE(),zone=getZone(),cl=e.touches?e.touches[0]:e,zr=zone.getBoundingClientRect();
  ST.drag={on:true,sx:cl.clientX,sy:cl.clientY,ol:parseFloat(el.style.left)||20,ot:parseFloat(el.style.top)||15};
  document.addEventListener('mousemove',onDrag);document.addEventListener('mouseup',endDrag);
  document.addEventListener('touchmove',onDrag,{passive:false});document.addEventListener('touchend',endDrag);
}
function onDrag(e){
  if(!ST.drag.on)return;e.preventDefault();
  const cl=e.touches?e.touches[0]:e,el=getDE(),zone=getZone(),zr=zone.getBoundingClientRect();
  el.style.left=(ST.drag.ol+(cl.clientX-ST.drag.sx)/zr.width*100)+'%';
  el.style.top=(ST.drag.ot+(cl.clientY-ST.drag.sy)/zr.height*100)+'%';
}
function endDrag(){ST.drag.on=false;document.removeEventListener('mousemove',onDrag);document.removeEventListener('mouseup',endDrag);document.removeEventListener('touchmove',onDrag);document.removeEventListener('touchend',endDrag);}

/* RESIZE */
function startRsz(e){
  e.preventDefault();e.stopPropagation();
  const el=getDE(),zone=getZone(),cl=e.touches?e.touches[0]:e,zr=zone.getBoundingClientRect();
  ST.rsz={on:true,sx:cl.clientX,ow:parseFloat(el.style.width)||60,zW:zr.width};
  document.addEventListener('mousemove',onRsz);document.addEventListener('mouseup',endRsz);
  document.addEventListener('touchmove',onRsz,{passive:false});document.addEventListener('touchend',endRsz);
}
function onRsz(e){
  if(!ST.rsz.on)return;e.preventDefault();
  const cl=e.touches?e.touches[0]:e,el=getDE(),zone=getZone(),zr=zone.getBoundingClientRect();
  const nW=Math.max(8,ST.rsz.ow+(cl.clientX-ST.rsz.sx)/zr.width*100);
  el.style.width=nW+'%';
  document.getElementById('r-sz').value=nW;
  document.getElementById('v-sz').textContent=Math.round(nW)+'%';
}
function endRsz(){ST.rsz.on=false;document.removeEventListener('mousemove',onRsz);document.removeEventListener('mouseup',endRsz);document.removeEventListener('touchmove',onRsz);document.removeEventListener('touchend',endRsz);}

function getDE(){return document.getElementById('design-el');}
function getZone(){return document.getElementById('print-zone');}
function applySize(v){const e=getDE();if(e)e.style.width=v+'%';document.getElementById('v-sz').textContent=v+'%';}
function applyRot(v){const e=getDE();if(e)e.style.transform=`rotate(${v}deg)`;document.getElementById('v-rt').textContent=v+'°';}
function applyOp(v){const e=getDE();if(e)e.style.opacity=v/100;document.getElementById('v-op').textContent=v+'%';}
function doAlign(pos){
  document.querySelectorAll('.ag').forEach(b=>b.classList.remove('on'));event.target.classList.add('on');
  const el=getDE();if(!el)return;
  const w=parseFloat(el.style.width)||60;
  const m={tl:{l:2,t:2},tc:{l:(100-w)/2,t:2},tr:{l:100-w-2,t:2},cl:{l:2,t:20},cc:{l:(100-w)/2,t:20},cr:{l:100-w-2,t:20},bl:{l:2,t:65},bc:{l:(100-w)/2,t:65},br:{l:100-w-2,t:65}};
  const a=m[pos]||{l:20,t:15};el.style.left=a.l+'%';el.style.top=a.t+'%';
}
function resetDesign(){
  const el=getDE();if(el){el.style.width='60%';el.style.left='20%';el.style.top='15%';el.style.transform='rotate(0deg)';el.style.opacity=1;}
  document.getElementById('r-sz').value=60;document.getElementById('v-sz').textContent='60%';
  document.getElementById('r-rt').value=0;document.getElementById('v-rt').textContent='0°';
  document.getElementById('r-op').value=100;document.getElementById('v-op').textContent='100%';
}
function togBg(){ST.bgRemove=!ST.bgRemove;document.getElementById('tog-bg').classList.toggle('on',ST.bgRemove);document.getElementById('bg-warn').style.display=ST.bgRemove?'block':'none';const z=getZone();if(z)z.classList.toggle('checker',ST.bgRemove);if(ST.bgRemove)toast('✓ Fondo se eliminará · Salida PNG transparente');}
function togGuides(){ST.guides=!ST.guides;document.getElementById('tog-guides').classList.toggle('on',ST.guides);const z=document.getElementById('print-zone');if(z){z.style.border=ST.guides?'1.5px dashed rgba(201,79,42,.4)':'1.5px dashed transparent';const l=z.querySelector('.pz-lbl');if(l)l.style.display=ST.guides?'':'none';}}
function selDpi(el,v){ST.dpi=v;['dpi150','dpi300','dpi600'].forEach(id=>{const b=document.getElementById(id);b.className='btn btn-outline btn-sm';});el.className='btn btn-ink btn-sm';const hints={150:'150 DPI — válido para pósters grandes vistos a distancia',300:'300 DPI — estándar para la mayoría de productos',600:'600 DPI — alta calidad para items pequeños (stickers, tarjetas)'};document.getElementById('dpi-hint').textContent=hints[v];buildAnalysis();}
function forceScale(el,v){if(el.classList.contains('locked')){toast('🔒 Este upscale requiere plan Pro');return;}ST.scale=v;document.querySelectorAll('.sc-pill:not(.locked)').forEach(p=>p.classList.remove('on'));el.classList.add('on');document.getElementById('rec-scale').textContent=v+'×';if(ST._a)ST._a.recScale=v;}
function zIn(){ST.zoom=Math.min(2,ST.zoom+.1);applyZoom();}
function zOut(){ST.zoom=Math.max(.5,ST.zoom-.1);applyZoom();}
function applyZoom(){const s=document.getElementById('canvas-stage');s.style.transform=`scale(${ST.zoom})`;s.style.transformOrigin='center top';document.getElementById('zlbl').textContent=Math.round(ST.zoom*100)+'%';}

/* ════════════════════════════════════
   PROCESSING + RESULT
════════════════════════════════════ */
function startProc(){
  if(!ST.upscaleDone){toast('⚡ Primero presiona "Mejorar ahora" para aplicar el upscale');return;}
  const a=ST._a||{recScale:4,outW:ST.imgW*4,outH:ST.imgH*4,dpiPct:60,sd:{w:20,h:9}};
  const p=ST.preset;
  document.querySelectorAll('.screen,.proc-wrap').forEach(s=>s.classList.remove('act'));
  document.getElementById('proc-wrap').classList.add('act');
  for(let i=1;i<=4;i++){const si=document.getElementById(`si${i}`);si.classList.remove('act','done');if(i<4)si.classList.add('done');else si.classList.add('act');}
  document.getElementById('proc-info').textContent=`${p.name}${p.shirt?' · '+ST.shirtSz:''} · ${ST.scale}× · ${ST.dpi} DPI`;
  document.getElementById('pl4').style.display=ST.bgRemove?'flex':'none';
  document.querySelectorAll('.pl').forEach(l=>l.classList.remove('done','cur'));
  window.scrollTo({top:0,behavior:'smooth'});

  let pct=0,step=0;
  const logIds=['pl1','pl2','pl3',ST.bgRemove?'pl4':'pl5','pl5','pl6'];
  const msgs=['Analizando píxeles…','Ejecutando Real-ESRGAN…','Mejorando bordes y texturas…',ST.bgRemove?'Eliminando fondo (rembg)…':'Aplicando posición en producto…','Calculando dimensiones…','Codificando archivo final…'];

  const iv=setInterval(()=>{
    pct+=Math.random()*5+1.5;if(pct>100)pct=100;
    document.getElementById('pbar').style.width=pct+'%';
    document.getElementById('ppct').textContent=Math.floor(pct)+'%';
    const ns=Math.min(Math.floor(pct/17),logIds.length-1);
    if(ns>step){const lid=logIds[step];if(lid){document.getElementById(lid)?.classList.remove('cur');document.getElementById(lid)?.classList.add('done');}step=ns;}
    const cl=logIds[step];if(cl){document.getElementById(cl)?.classList.add('cur');document.getElementById('pmsg').textContent=msgs[step]||'';}
    if(pct>=100){clearInterval(iv);document.querySelectorAll('.pl').forEach(l=>{l.classList.remove('cur');l.classList.add('done');});setTimeout(()=>showResult(a),400);}
  },160);
}

function showResult(a){
  const p=ST.preset,sd=a.sd||{w:20,h:9};
  const fmt=ST.bgRemove?'PNG':ST.fmt;
  const t=(13+Math.random()*9).toFixed(1);
  const outW=a.outW||ST.imgW*ST.scale,outH=a.outH||ST.imgH*ST.scale;

  document.getElementById('r-sub').textContent=`${p.name}${p.shirt?' · '+ST.shirtSz:''} · ${ST.dpi} DPI · ${fmt}`;
  document.getElementById('r-res').textContent=`${outW.toLocaleString()}×${outH.toLocaleString()}`;
  document.getElementById('r-res-s').textContent=`${ST.scale}× upscale neural aplicado`;
  document.getElementById('r-dpi').textContent=ST.dpi;
  document.getElementById('r-phys').textContent=`${sd.w}×${sd.h}cm`;
  document.getElementById('r-preset-s').textContent=p.name+(p.shirt?' · '+ST.shirtSz:'');
  document.getElementById('r-scale').textContent=ST.scale+'×';

  if(ST.bgRemove)document.getElementById('jpg-tab').classList.add('off');

  const checks=[
    {ok:true,t:`Resolución: ${outW.toLocaleString()}×${outH.toLocaleString()}px`},
    {ok:(a.dpiPct||70)>=60,t:`DPI: ${Math.round(a.outDpi||ST.dpi)} → objetivo ${ST.dpi} DPI`},
    {ok:true,t:`Upscale ${ST.scale}× neural · Real-ESRGAN AI aplicado`},
    {ok:true,t:`Formato: ${fmt} listo para imprimir`},
    {ok:ST.bgRemove,t:ST.bgRemove?'Fondo eliminado · PNG transparente':'Fondo original mantenido',opt:true},
    {ok:!p.bleed,t:p.bleed?'Bleed 3mm incluido automáticamente':'Sin sangrado requerido'},
    {ok:true,t:`Producto: ${p.name}${p.shirt?' talla '+ST.shirtSz:''}`},
  ];
  document.getElementById('r-checklist').innerHTML=checks.map(c=>`
    <div class="chk">
      <span style="font-size:13px;flex-shrink:0;">${c.ok?'✅':c.opt?'ℹ️':'⚠️'}</span>
      <span style="font-size:12px;color:${c.ok?'var(--green)':c.opt?'var(--muted)':'var(--gold)'};">${c.t}</span>
    </div>`).join('');

  document.getElementById('r-alerts').innerHTML=(a.dpiPct||70)>=60
    ?`<div class="al al-ok" style="margin-bottom:10px;">✅ Imagen mejorada ${ST.scale}× · Calidad óptima para ${p.name} a ${ST.dpi} DPI.</div>`
    :`<div class="al al-warn" style="margin-bottom:10px;">⚠️ Upscale ${ST.scale}× aplicado. Recuerda que imágenes muy pequeñas tienen limitaciones físicas de detalle.</div>`;

  document.getElementById('proc-wrap').classList.remove('act');
  goTo(4);
}

function downloadResult(){
  if(!ST.enhancedURL){toast('Primero aplica el upscale');return;}
  const a=document.createElement('a');
  a.href=ST.enhancedURL;
  a.download=`printly_${ST.preset?.id||'enhanced'}_${ST.scale}x_${ST.dpi}dpi.png`;
  document.body.appendChild(a);a.click();document.body.removeChild(a);
  toast('⬇ Descargando imagen mejorada…');
}

function selFmt(el,fmt){
  if(el.classList.contains('off')){toast('⚠️ JPG no soporta transparencia');return;}
  ST.fmt=fmt;
  document.querySelectorAll('.dl-tab').forEach(t=>t.classList.remove('on'));el.classList.add('on');
  const notes={PNG:'PNG — sin pérdida de calidad, soporta transparencia. Ideal para impresión.',JPG:'JPG — comprimido, menor peso. No soporta transparencia.',WEBP:'WEBP — moderno, excelente relación calidad/peso. Soporta transparencia.'};
  document.getElementById('dl-note').textContent=notes[fmt]||'';
  document.getElementById('dl-btn').textContent=`⬇ Descargar ${fmt}`;
}

/* ════════════════════════════════════
   RESET
════════════════════════════════════ */
function resetAll(){
  Object.assign(ST,{src:null,imgW:0,imgH:0,fileBytes:0,file:null,originalURL:null,enhancedURL:null,beforeURL:null,preset:null,shirtSz:'M',placement:'front',bgRemove:false,guides:true,dpi:300,scale:4,zoom:1,fmt:'PNG',upscaleDone:false,drag:{on:false},rsz:{on:false},_a:null});
  document.getElementById('upload-zone').style.display='block';
  document.getElementById('uc-card').style.display='none';
  document.getElementById('file-inp').value='';
  document.getElementById('restart-btn').style.display='none';
  document.getElementById('s2btn').disabled=true;
  const btn=document.getElementById('upscale-btn');
  if(btn){btn.disabled=false;btn.textContent='⚡ Mejorar ahora';}
  const np=document.getElementById('not-proc');
  if(np){np.style.display='flex';np.innerHTML=`<div style="font-size:44px;">🔍</div><div style="font-family:'Cormorant Garamond',serif;font-size:22px;color:var(--warm);font-weight:300;">La comparación aparece aquí</div><div style="font-size:13px;color:rgba(247,244,239,.5);">Presiona el botón para ver la diferencia real</div><button class="btn btn-terra" onclick="runRealESRGAN()" style="margin-top:4px;">⚡ Mejorar imagen ahora</button>`;}
  buildGrid();
  goTo(1);
}

/* INIT */
buildGrid();
</script>

<!-- ══════════════════════════════════════════
     HERO SECTION (above tool, below nav)
══════════════════════════════════════════ -->
<!-- User Status Bar — shown when logged in -->
<div id="user-status-bar" style="display:none;background:#f0ebe5;border-bottom:1px solid rgba(26,22,18,.08);padding:8px 32px;">
  <div style="max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;font-size:12px;color:#7a746a;">
    <div style="display:flex;align-items:center;gap:16px;">
      <span>👤 <span id="user-email-display">—</span></span>
      <span style="background:#c94f2a;color:white;padding:2px 8px;border-radius:20px;font-size:10px;font-weight:700;" id="user-plan-display">FREE</span>
      <span id="user-credits-display">2 imágenes restantes</span>
    </div>
    <div style="display:flex;gap:12px;align-items:center;">
      <a href="#pricing-section" onclick="document.getElementById(&#39;pricing-section&#39;).scrollIntoView({behavior:&#39;smooth&#39;});return false;" style="color:#c94f2a;font-weight:600;text-decoration:none;font-size:12px;">⚡ Mejorar plan</a>
      <button onclick="window.Clerk &amp;&amp; window.Clerk.signOut()" style="background:none;border:none;color:#7a746a;cursor:pointer;font-size:12px;font-family:inherit;">Cerrar sesión</button>
    </div>
  </div>
</div>

<div id="hero-section" style="min-height:91vh;display:flex;align-items:center;background:var(--warm);position:relative;overflow:hidden;border-bottom:1px solid rgba(26,22,18,.07);">
  <div style="position:absolute;inset:0;background-image:linear-gradient(rgba(26,22,18,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(26,22,18,.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;"></div>
  <div style="position:absolute;top:0;right:0;width:55%;height:100%;background:radial-gradient(ellipse 80% 80% at 80% 50%,rgba(201,79,42,.06) 0%,transparent 70%);pointer-events:none;"></div>

  <div style="max-width:1120px;margin:0 auto;padding:80px 48px;width:100%;display:grid;grid-template-columns:1fr 1fr;gap:72px;align-items:center;position:relative;z-index:1;box-sizing:border-box;">
    <!-- Copy -->
    <div>
      <div style="display:inline-flex;align-items:center;gap:8px;padding:5px 14px;background:rgba(201,79,42,.08);border:1px solid rgba(201,79,42,.2);border-radius:100px;margin-bottom:28px;">
        <div style="width:6px;height:6px;border-radius:50%;background:#c94f2a;animation:px2Pulse 2s ease-in-out infinite;flex-shrink:0;"></div>
        <span style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:#c94f2a;">AI Resolution Engine for Print Businesses</span>
      </div>
      <h1 style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:clamp(44px,5.5vw,74px);line-height:1.0;letter-spacing:-.02em;margin:0 0 24px;color:var(--ink);font-weight:400;">
        Turn Any Image<br>Into a <em style="font-style:italic;color:#c94f2a;">Print-Ready</em><br>File.
      </h1>
      <p style="font-size:17px;color:var(--muted);line-height:1.75;max-width:460px;margin:0 0 36px;font-weight:300;">Upload your image, choose your product, and automatically upscale it to 300 or 600 DPI. Perfect for t-shirts, mugs, posters, stickers, and POD businesses.</p>
      <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:48px;">
        <button onclick="openAuthModal(&#39;signup&#39;)" style="padding:14px 30px;background:#c94f2a;border:none;color:white;font-family:&#39;Outfit&#39;,sans-serif;font-size:15px;font-weight:700;border-radius:10px;cursor:pointer;box-shadow:0 4px 20px rgba(201,79,42,.3);">Try It Free →</button>
        <button onclick="document.getElementById(&#39;pricing-section&#39;).scrollIntoView({behavior:&#39;smooth&#39;})" style="padding:14px 26px;background:transparent;border:1.5px solid rgba(26,22,18,.15);color:var(--ink);font-family:&#39;Outfit&#39;,sans-serif;font-size:15px;font-weight:600;border-radius:10px;cursor:pointer;">See Pricing</button>
      </div>
      <div style="display:flex;gap:0;">
        <div style="padding-right:28px;"><div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:32px;font-weight:600;color:var(--ink);line-height:1;">300–600</div><div style="font-size:11px;color:var(--muted);margin-top:3px;">DPI output</div></div>
        <div style="width:1px;background:rgba(26,22,18,.1);margin:0 28px 0 0;height:44px;"></div>
        <div style="padding-right:28px;"><div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:32px;font-weight:600;color:var(--ink);line-height:1;">10×</div><div style="font-size:11px;color:var(--muted);margin-top:3px;">Max upscale (Pro)</div></div>
        <div style="width:1px;background:rgba(26,22,18,.1);margin:0 28px 0 0;height:44px;"></div>
        <div><div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:32px;font-weight:600;color:var(--ink);line-height:1;">&lt;20s</div><div style="font-size:11px;color:var(--muted);margin-top:3px;">Processing time</div></div>
      </div>
    </div>
    <!-- Mock card -->
    <div style="background:#fff;border:1px solid rgba(26,22,18,.09);border-radius:18px;overflow:hidden;box-shadow:0 32px 80px rgba(26,22,18,.12);">
      <div style="background:#ede9e1;border-bottom:1px solid rgba(26,22,18,.07);padding:11px 16px;display:flex;align-items:center;gap:7px;">
        <div style="width:9px;height:9px;border-radius:50%;background:#ff5f57;"></div>
        <div style="width:9px;height:9px;border-radius:50%;background:#febc2e;"></div>
        <div style="width:9px;height:9px;border-radius:50%;background:#28c840;"></div>
        <span style="font-family:&#39;JetBrains Mono&#39;,monospace;font-size:10px;color:#7a746a;margin-left:6px;">pix2print — resolution analysis</span>
      </div>
      <div style="padding:18px;display:flex;flex-direction:column;gap:8px;">
        <div style="display:flex;justify-content:space-between;padding:9px 12px;background:#f7f4ef;border-radius:7px;"><span style="font-size:12px;color:#7a746a;">Source image</span><span style="font-family:&#39;JetBrains Mono&#39;,monospace;font-size:12px;color:#1a1612;">logo_etsy.png</span></div>
        <div style="display:flex;justify-content:space-between;padding:9px 12px;background:#f7f4ef;border-radius:7px;"><span style="font-size:12px;color:#7a746a;">Resolution</span><span style="font-family:&#39;JetBrains Mono&#39;,monospace;font-size:12px;color:#b5860a;">420 × 420 px</span></div>
        <div style="display:flex;justify-content:space-between;padding:9px 12px;background:#f7f4ef;border-radius:7px;"><span style="font-size:12px;color:#7a746a;">Target product</span><span style="font-family:&#39;JetBrains Mono&#39;,monospace;font-size:12px;color:#1a1612;">T-Shirt Front (M)</span></div>
        <div style="display:flex;justify-content:space-between;align-items:center;padding:9px 12px;background:#f7f4ef;border-radius:7px;"><span style="font-size:12px;color:#7a746a;">Current DPI</span><span style="padding:3px 9px;background:rgba(181,134,10,.12);color:#b5860a;border-radius:5px;font-size:11px;font-weight:700;">⚠ 49 DPI</span></div>
        <div style="padding:10px 12px;background:#f7f4ef;border-radius:7px;">
          <div style="display:flex;justify-content:space-between;font-size:10px;color:#7a746a;margin-bottom:7px;"><span>Upscaling 4× with AI…</span><span style="color:#c94f2a;font-weight:600;">↑ 4×</span></div>
          <div style="height:4px;background:rgba(26,22,18,.08);border-radius:2px;overflow:hidden;"><div style="height:100%;width:84%;background:linear-gradient(90deg,#c94f2a,#e0672f);border-radius:2px;"></div></div>
          <div style="display:flex;justify-content:space-between;font-size:10px;color:#7a746a;margin-top:6px;"><span>Output</span><span style="color:#2a6e4a;font-weight:600;">1680 × 1680 px ✓</span></div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;padding:9px 12px;background:#f7f4ef;border-radius:7px;"><span style="font-size:12px;color:#7a746a;">Output DPI</span><span style="padding:3px 9px;background:rgba(42,110,74,.1);color:#2a6e4a;border-radius:5px;font-size:11px;font-weight:700;">✓ 300 DPI</span></div>
        <div style="display:flex;justify-content:space-between;align-items:center;padding:9px 12px;background:#f7f4ef;border-radius:7px;"><span style="font-size:12px;color:#7a746a;">Status</span><span style="padding:3px 9px;background:rgba(201,79,42,.08);color:#c94f2a;border-radius:5px;font-size:11px;font-weight:700;">Print-Ready ✓</span></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     UPGRADE MODAL
══════════════════════════════════════════ -->
<div id="upgrade-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);backdrop-filter:blur(10px);z-index:9999;align-items:center;justify-content:center;" onclick="if(event.target===this)this.style.display=&#39;none&#39;">
  <div style="background:#fff;border-radius:20px;padding:40px;max-width:400px;width:90%;position:relative;">
    <button onclick="document.getElementById(&#39;upgrade-modal&#39;).style.display=&#39;none&#39;" style="position:absolute;top:14px;right:14px;background:#f5f0eb;border:none;width:28px;height:28px;border-radius:6px;cursor:pointer;font-size:14px;">✕</button>
    <div style="font-size:40px;text-align:center;margin-bottom:14px;">⚡</div>
    <h2 style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:26px;text-align:center;margin-bottom:8px;">Unlock 8× &amp; 10× Upscale</h2>
    <p style="font-size:13px;color:#7a746a;text-align:center;margin-bottom:22px;line-height:1.65;">Upgrade to Pro to access advanced upscaling, HD background removal, and unlimited downloads.</p>
    <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:22px;">
      <div style="display:flex;align-items:center;gap:10px;padding:9px 13px;background:#f7f4ef;border-radius:8px;font-size:13px;"><span style="color:#2a6e4a;">✓</span> Upscale up to <strong>8× and 10×</strong></div>
      <div style="display:flex;align-items:center;gap:10px;padding:9px 13px;background:#f7f4ef;border-radius:8px;font-size:13px;"><span style="color:#2a6e4a;">✓</span> 600 DPI export · No watermark</div>
      <div style="display:flex;align-items:center;gap:10px;padding:9px 13px;background:#f7f4ef;border-radius:8px;font-size:13px;"><span style="color:#2a6e4a;">✓</span> Unlimited downloads</div>
    </div>
    <button onclick="document.getElementById(&#39;upgrade-modal&#39;).style.display=&#39;none&#39;;document.getElementById(&#39;pricing-section&#39;).scrollIntoView({behavior:&#39;smooth&#39;});" style="width:100%;padding:13px;background:#c94f2a;border:none;color:white;font-family:&#39;Outfit&#39;,sans-serif;font-size:15px;font-weight:700;border-radius:9px;cursor:pointer;">Ver planes →</button>
    <div style="text-align:center;font-size:12px;color:#7a746a;margin-top:10px;">Cancel anytime · No hidden fees</div>
  </div>
</div>

<!-- AUTH MODAL — Clerk -->
<div id="auth-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.65);backdrop-filter:blur(12px);z-index:9999;align-items:center;justify-content:center;" onclick="if(event.target===this)closeAuthModal()">
  <div style="background:#fff;border-radius:24px;padding:0;max-width:480px;width:94%;position:relative;max-height:92vh;overflow-y:auto;box-shadow:0 40px 100px rgba(0,0,0,.25);">
    <!-- Header -->
    <div style="padding:24px 28px 0;display:flex;justify-content:space-between;align-items:center;">
      <img src="data:image/png;base64,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" alt="Pix2Print" style="height:32px;width:auto;">
      <button onclick="closeAuthModal()" style="background:#f5f0eb;border:none;width:32px;height:32px;border-radius:8px;cursor:pointer;font-size:16px;color:#7a746a;display:flex;align-items:center;justify-content:center;">✕</button>
    </div>
    <!-- Clerk mounts here -->
    <div id="clerk-mount-point" style="padding:8px 4px 4px;"></div>
    <!-- Loading state -->
    <div id="auth-loading" style="text-align:center;padding:48px 28px;">
      <div style="width:40px;height:40px;border:3px solid #f0ebe5;border-top-color:#c94f2a;border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 16px;"></div>
      <p style="color:#7a746a;font-size:14px;margin:0 0 16px;">Cargando...</p>
      <div id="auth-fallback-links" style="display:none;">
        <p style="color:#7a746a;font-size:12px;margin:0 0 12px;">¿Tarda mucho? Accede directamente:</p>
        <a href="https://www.google.com/url?q=https://accounts.pix2print.net/sign-up?redirect_url%3Dhttps://pix2print.net&amp;source=gmail-imap&amp;ust=1772487275000000&amp;usg=AOvVaw25alryfOlLFdvUMukAm3MS" style="display:block;margin-bottom:8px;padding:10px;background:#c94f2a;color:white;border-radius:8px;text-decoration:none;font-size:14px;font-weight:600;">Crear cuenta gratis</a>
        <a href="https://www.google.com/url?q=https://accounts.pix2print.net/sign-in?redirect_url%3Dhttps://pix2print.net&amp;source=gmail-imap&amp;ust=1772487275000000&amp;usg=AOvVaw1mF__iBkQTSLKDIpPpHHnL" style="display:block;padding:10px;background:#f0ebe5;color:#1a1612;border-radius:8px;text-decoration:none;font-size:14px;font-weight:600;">Iniciar sesión</a>
      </div>
    </div>
    <script>setTimeout(function(){var f=document.getElementById("auth-fallback-links");if(f)f.style.display="block";},3000);</script>
  </div>
</div>
<style>@keyframes spin{to{transform:rotate(360deg)}}</style>


<!-- ══════════════════════════════════════════
     LEGAL MODAL (Privacy, Terms, DMCA, Refunds)
══════════════════════════════════════════ -->
<div id="legal-modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(10px);z-index:9999;align-items:center;justify-content:center;" onclick="if(event.target===this)this.style.display=&#39;none&#39;">
  <div style="background:#fff;border-radius:20px;padding:0;max-width:640px;width:92%;position:relative;max-height:88vh;display:flex;flex-direction:column;">
    <!-- Header -->
    <div style="display:flex;align-items:center;justify-content:space-between;padding:20px 28px;border-bottom:1px solid rgba(26,22,18,.08);">
      <div style="display:flex;gap:6px;flex-wrap:wrap;">
        <button onclick="showLegal(&#39;privacy&#39;)" id="tab-privacy" style="padding:5px 12px;font-size:12px;font-weight:600;border:1.5px solid #c94f2a;border-radius:6px;background:#c94f2a;color:white;cursor:pointer;font-family:&#39;Outfit&#39;,sans-serif;">Privacy</button>
        <button onclick="showLegal(&#39;terms&#39;)" id="tab-terms" style="padding:5px 12px;font-size:12px;font-weight:600;border:1.5px solid rgba(26,22,18,.12);border-radius:6px;background:transparent;color:#7a746a;cursor:pointer;font-family:&#39;Outfit&#39;,sans-serif;">Terms</button>
        <button onclick="showLegal(&#39;dmca&#39;)" id="tab-dmca" style="padding:5px 12px;font-size:12px;font-weight:600;border:1.5px solid rgba(26,22,18,.12);border-radius:6px;background:transparent;color:#7a746a;cursor:pointer;font-family:&#39;Outfit&#39;,sans-serif;">DMCA</button>
        <button onclick="showLegal(&#39;refunds&#39;)" id="tab-refunds" style="padding:5px 12px;font-size:12px;font-weight:600;border:1.5px solid rgba(26,22,18,.12);border-radius:6px;background:transparent;color:#7a746a;cursor:pointer;font-family:&#39;Outfit&#39;,sans-serif;">Refunds</button>
      </div>
      <button onclick="document.getElementById(&#39;legal-modal&#39;).style.display=&#39;none&#39;" style="background:#f5f0eb;border:none;width:28px;height:28px;border-radius:6px;cursor:pointer;font-size:14px;flex-shrink:0;">✕</button>
    </div>
    <!-- Content -->
    <div id="legal-content" style="padding:28px;overflow-y:auto;font-size:13px;line-height:1.8;color:#3a3530;"></div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     PRICING SECTION
══════════════════════════════════════════ -->
<div id="pricing-section" style="padding:80px 0;background:#f7f4ef;">
  <div style="max-width:1000px;margin:0 auto;padding:0 40px;text-align:center;margin-bottom:48px;">
    <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:#7a746a;margin-bottom:12px;">Pricing</div>
    <h2 style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:42px;font-weight:400;color:#1a1612;margin:0;">Simple, transparent pricing.</h2>
  </div>
  <div style="max-width:1100px;margin:0 auto;padding:0 40px;display:grid;grid-template-columns:repeat(5,1fr);gap:10px;">

    <!-- FREE -->
    <div style="background:#fff;border:1px solid rgba(26,22,18,.08);border-radius:18px;padding:22px 18px;">
      <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:#7a746a;margin-bottom:12px;">Free</div>
      <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:38px;line-height:1;margin-bottom:3px;">$0<span style="font-size:14px;font-family:&#39;Outfit&#39;,sans-serif;color:#7a746a;">/mo</span></div>
      <p style="font-size:12px;color:#7a746a;margin:10px 0 14px;padding-bottom:12px;border-bottom:1px solid rgba(26,22,18,.06);line-height:1.6;">Para explorar la herramienta.</p>
      <div style="display:flex;flex-direction:column;gap:7px;margin-bottom:18px;font-size:12px;color:#5a5550;">
        <div>✓ 2 imágenes/mes</div>
        <div>✓ Upscale hasta <strong>2×</strong></div>
        <div>✓ 300 DPI · PNG</div>
        <div style="color:rgba(26,22,18,.3);">✗ Marca de agua</div>
      </div>
      <button onclick="scrollToApp()" style="width:100%;padding:10px;border-radius:9px;background:#ede9e1;border:1px solid rgba(26,22,18,.1);color:#5a5550;font-family:&#39;Outfit&#39;,sans-serif;font-size:13px;font-weight:600;cursor:pointer;">Usar gratis →</button>
    </div>

    <!-- PACK 5 -->
    <div style="background:#fff;border:1px solid rgba(26,22,18,.08);border-radius:18px;padding:22px 18px;">
      <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:#7a746a;margin-bottom:12px;">Pack 5</div>
      <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:38px;line-height:1;margin-bottom:3px;">$8<span style="font-size:14px;font-family:&#39;Outfit&#39;,sans-serif;color:#7a746a;"> único</span></div>
      <p style="font-size:12px;color:#7a746a;margin:10px 0 14px;padding-bottom:12px;border-bottom:1px solid rgba(26,22,18,.06);line-height:1.6;">Pago único · Sin suscripción.</p>
      <div style="display:flex;flex-direction:column;gap:7px;margin-bottom:18px;font-size:12px;color:#5a5550;">
        <div>✓ <strong>5 imágenes</strong></div>
        <div>✓ Upscale hasta <strong>4×</strong></div>
        <div>✓ 300 DPI · PNG</div>
        <div>✓ Sin marca de agua</div>
      </div>
      <button onclick="startCheckout(&#39;pack5&#39;)" style="width:100%;padding:10px;border-radius:9px;background:#ede9e1;border:1px solid rgba(26,22,18,.1);color:#5a5550;font-family:&#39;Outfit&#39;,sans-serif;font-size:13px;font-weight:600;cursor:pointer;">Comprar Pack →</button>
    </div>

    <!-- PACK 10 -->
    <div style="background:#fff;border:1px solid rgba(26,22,18,.08);border-radius:18px;padding:22px 18px;position:relative;">
      <div style="position:absolute;top:-11px;left:50%;transform:translateX(-50%);background:#2a6e4a;color:white;padding:3px 12px;border-radius:100px;font-size:10px;font-weight:700;white-space:nowrap;">Mejor valor</div>
      <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:#7a746a;margin-bottom:12px;">Pack 10</div>
      <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:38px;line-height:1;margin-bottom:3px;">$14<span style="font-size:14px;font-family:&#39;Outfit&#39;,sans-serif;color:#7a746a;"> único</span></div>
      <p style="font-size:12px;color:#7a746a;margin:10px 0 14px;padding-bottom:12px;border-bottom:1px solid rgba(26,22,18,.06);line-height:1.6;">Pago único · Sin suscripción.</p>
      <div style="display:flex;flex-direction:column;gap:7px;margin-bottom:18px;font-size:12px;color:#5a5550;">
        <div>✓ <strong>10 imágenes</strong></div>
        <div>✓ Upscale hasta <strong>4×</strong></div>
        <div>✓ 300 DPI · PNG</div>
        <div>✓ Sin marca de agua</div>
      </div>
      <button onclick="startCheckout(&#39;pack10&#39;)" style="width:100%;padding:10px;border-radius:9px;background:#ede9e1;border:1px solid rgba(26,22,18,.1);color:#5a5550;font-family:&#39;Outfit&#39;,sans-serif;font-size:13px;font-weight:600;cursor:pointer;">Comprar Pack →</button>
    </div>

    <!-- PRO -->
    <div style="background:#1a1612;border:2px solid #c94f2a;border-radius:18px;padding:22px 18px;position:relative;">
      <div style="position:absolute;top:-11px;left:50%;transform:translateX(-50%);background:#c94f2a;color:white;padding:3px 12px;border-radius:100px;font-size:10px;font-weight:700;white-space:nowrap;">⭐ Popular</div>
      <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:rgba(247,244,239,.5);margin-bottom:12px;">Pro</div>
      <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:38px;line-height:1;color:#f7f4ef;margin-bottom:3px;">$16<span style="font-size:14px;font-family:&#39;Outfit&#39;,sans-serif;color:rgba(247,244,239,.5);">/mes</span></div>
      <p style="font-size:12px;color:rgba(247,244,239,.5);margin:10px 0 14px;padding-bottom:12px;border-bottom:1px solid rgba(247,244,239,.08);line-height:1.6;">Para negocios de impresión.</p>
      <div style="display:flex;flex-direction:column;gap:7px;margin-bottom:18px;font-size:12px;color:rgba(247,244,239,.75);">
        <div><span style="color:#22c55e;">✓</span> <strong>Ilimitadas</strong></div>
        <div><span style="color:#22c55e;">✓</span> Upscale hasta <strong>8×</strong></div>
        <div><span style="color:#22c55e;">✓</span> 300 &amp; <strong>600 DPI</strong></div>
        <div><span style="color:#22c55e;">✓</span> Sin marca de agua</div>
      </div>
      <button onclick="startCheckout(&#39;pro&#39;)" style="width:100%;padding:10px;border-radius:9px;background:#c94f2a;border:none;color:white;font-family:&#39;Outfit&#39;,sans-serif;font-size:13px;font-weight:700;cursor:pointer;">Suscribirse →</button>
    </div>

    <!-- UNLIMITED -->
    <div style="background:#fff;border:1px solid rgba(26,22,18,.08);border-radius:18px;padding:22px 18px;">
      <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:#7a746a;margin-bottom:12px;">Unlimited</div>
      <div style="font-family:&#39;Cormorant Garamond&#39;,serif;font-size:38px;line-height:1;margin-bottom:3px;">$32<span style="font-size:14px;font-family:&#39;Outfit&#39;,sans-serif;color:#7a746a;">/mes</span></div>
      <p style="font-size:12px;color:#7a746a;margin:10px 0 14px;padding-bottom:12px;border-bottom:1px solid rgba(26,22,18,.06);line-height:1.6;">Agencias y alto volumen.</p>
      <div style="display:flex;flex-direction:column;gap:7px;margin-bottom:18px;font-size:12px;color:#5a5550;">
        <div>✓ Todo lo de Pro</div>
        <div>✓ Upscale hasta <strong>10×</strong></div>
        <div>✓ Lotes (50 imgs)</div>
        <div>✓ Exportar TIFF</div>
        <div>✓ API completa</div>
      </div>
      <button onclick="startCheckout(&#39;unlimited&#39;)" style="width:100%;padding:10px;border-radius:9px;background:#ede9e1;border:1px solid rgba(26,22,18,.1);color:#5a5550;font-family:&#39;Outfit&#39;,sans-serif;font-size:13px;font-weight:600;cursor:pointer;">Suscribirse →</button>
    </div>

  </div></div>
  <div style="max-width:900px;margin:20px auto 0;padding:0 40px;">
    <div style="padding:14px 20px;background:rgba(181,134,10,.07);border:1px solid rgba(181,134,10,.2);border-radius:10px;font-size:13px;color:#b5860a;text-align:center;">
      🌎 <strong>Precio especial para negocios LATAM.</strong> Contáctanos para descuentos en planes Pro e Ilimitado.
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer style="background:#1a1612;padding:40px;text-align:center;">
  <div style="margin-bottom:16px;"><img src="data:image/png;base64,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" alt="Pix2Print" style="height:51px;width:auto;background:#fff;border-radius:10px;padding:6px 12px;box-sizing:border-box;"></div>
  <p style="font-size:13px;color:rgba(247,244,239,.4);margin-bottom:20px;">AI Resolution Engine for modern print businesses.</p>
  <div style="display:flex;gap:20px;justify-content:center;flex-wrap:wrap;margin-bottom:20px;">
    <a href="#" onclick="openAuthModal(&#39;signup&#39;);return false;" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">Sign Up</a>
    <a href="#" onclick="document.getElementById(&#39;pricing-section&#39;).scrollIntoView({behavior:&#39;smooth&#39;});return false;" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">Pricing</a>
    <a href="#" onclick="showLegal(&#39;privacy&#39;);return false;" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">Privacy Policy</a>
    <a href="#" onclick="showLegal(&#39;terms&#39;);return false;" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">Terms of Service</a>
    <a href="#" onclick="showLegal(&#39;dmca&#39;);return false;" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">DMCA</a>
    <a href="#" onclick="showLegal(&#39;refunds&#39;);return false;" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">Refunds</a>
    <a href="/cdn-cgi/l/email-protection#d4a7a1a4a4bba6a094a4bdace6a4a6bdbaa0fabab1a0" style="font-size:13px;color:rgba(247,244,239,.45);text-decoration:none;">Contact</a>
  </div>
  <div style="font-size:11px;color:rgba(247,244,239,.2);">© 2025 Pix2Print · Powered by Real-ESRGAN · Canvas API · Built for print professionals</div>
</footer>

<!-- ══════════════════════════════════════════
     PIX2PRINT JS — Modals, Legal, Lang
     (AFTER engine script — zero interference)
══════════════════════════════════════════ -->
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
var currentLang = 'en';
var clerkUser = null;
var userPlan = 'free';
var imagesUsed = 0;
var FREE_LIMIT = 2;

// CLERK INIT
var isLocalDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';

window.addEventListener('load', function() {
  // En localhost, simular usuario demo sin Clerk
  if (isLocalDev) {
    console.log('Modo desarrollo local: Clerk deshabilitado');
    clerkUser = { id: 'demo-user', primaryEmailAddress: { emailAddress: 'demo@localhost' } };
    userPlan = 'unlimited'; // Plan ilimitado en desarrollo
    imagesUsed = 0;
    updateAuthUI(clerkUser);
    return;
  }
  
  // En producción, cargar Clerk normalmente
  var tries = 0;
  var interval = setInterval(function() {
    tries++;
    if (window.Clerk) { clearInterval(interval); initClerk(); }
    if (tries > 50) clearInterval(interval);
  }, 100);
});

async function initClerk() {
  try {
    await window.Clerk.load();
    var navMount = document.getElementById('nav-user-mount');
    if (navMount) window.Clerk.mountUserButton(navMount);
    window.Clerk.addListener(function() { updateAuthUI(window.Clerk.user); });
    updateAuthUI(window.Clerk.user);
  } catch(e) { console.log('Clerk error:', e); }
}

function updateAuthUI(user) {
  clerkUser = user;
  var out = document.getElementById('nav-auth-out');
  var inn = document.getElementById('nav-auth-in');
  var hero = document.getElementById('hero-section');
  var statusBar = document.getElementById('user-status-bar');

  if (user) {
    // En modo demo, ocultar elementos de autenticación
    if (isLocalDev) {
      if (out) out.style.display = 'none';
      if (inn) inn.style.display = 'none'; // Ocultar también el botón de usuario en demo
      if (hero) hero.style.display = 'none';
      if (statusBar) statusBar.style.display = 'none'; // Ocultar status bar en demo
      return;
    }
    if (out) out.style.display = 'none';
    if (inn) inn.style.display = 'flex';
    if (hero) hero.style.display = 'none';
    if (statusBar) statusBar.style.display = 'block';

    // Load saved state
    imagesUsed = parseInt(localStorage.getItem('px2_' + user.id) || '0');
    userPlan = localStorage.getItem('px2_plan_' + user.id) || 'free';

    // Update status bar
    var emailEl = document.getElementById('user-email-display');
    var planEl = document.getElementById('user-plan-display');
    var creditsEl = document.getElementById('user-credits-display');
    var planBadge = document.getElementById('nav-plan-badge');

    if (emailEl) emailEl.textContent = user.primaryEmailAddress ? user.primaryEmailAddress.emailAddress : user.firstName || 'Usuario';

    var planLabels = { free: 'FREE', pro: 'PRO', unlimited: 'UNLIMITED', pack5: 'PACK 5', pack10: 'PACK 10' };
    if (planEl) {
      planEl.textContent = planLabels[userPlan] || 'FREE';
      planEl.style.background = userPlan === 'free' ? '#7a746a' : '#c94f2a';
    }
    if (planBadge) planBadge.textContent = planLabels[userPlan] || 'FREE';

    var FREE_LIMIT = 2;
    if (creditsEl) {
      if (userPlan === 'free') {
        var remaining = Math.max(0, FREE_LIMIT - imagesUsed);
        creditsEl.textContent = remaining + ' imagen' + (remaining !== 1 ? 'es' : '') + ' restante' + (remaining !== 1 ? 's' : '');
      } else if (userPlan === 'pack5') {
        var rem5 = Math.max(0, 5 - imagesUsed);
        creditsEl.textContent = rem5 + ' de 5 imágenes restantes';
      } else if (userPlan === 'pack10') {
        var rem10 = Math.max(0, 10 - imagesUsed);
        creditsEl.textContent = rem10 + ' de 10 imágenes restantes';
      } else {
        creditsEl.textContent = 'Imágenes ilimitadas';
      }
    }

    closeAuthModal();
    window.scrollTo({top: 0, behavior: 'smooth'});
    toast('¡Bienvenido a Pix2Print!');
    // Auto-trigger pending checkout after login
    if (window._pendingCheckout) {
      var plan = window._pendingCheckout;
      window._pendingCheckout = null;
      setTimeout(function() { startCheckout(plan); }, 800);
    }
  } else {
    if (out) out.style.display = 'flex';
    if (inn) inn.style.display = 'none';
    if (hero) hero.style.display = 'flex';
    if (statusBar) statusBar.style.display = 'none';
    userPlan = 'free';
    imagesUsed = 0;
  }
}

function openAuthModal(type) {
  document.getElementById('auth-modal').style.display = 'flex';
  mountClerkForm(type, 0);
}

function mountClerkForm(type, attempts) {
  // Wait for Clerk to load, then use its hosted UI
  if (attempts > 30) {
    // Fallback: redirect to Clerk hosted pages
    var returnUrl = encodeURIComponent(window.location.href);
    if (type === 'signup') {
      window.location.href = 'https://accounts.pix2print.net/sign-up?redirect_url=' + returnUrl;
    } else {
      window.location.href = 'https://accounts.pix2print.net/sign-in?redirect_url=' + returnUrl;
    }
    return;
  }
  if (!window.Clerk || !window.Clerk.loaded) {
    setTimeout(function() { mountClerkForm(type, attempts + 1); }, 100);
    return;
  }
  var mount = document.getElementById('clerk-mount-point');
  var loading = document.getElementById('auth-loading');
  if (!mount) return;
  if (loading) loading.style.display = 'none';
  mount.innerHTML = '';
  var appearance = {
    variables: { colorPrimary: '#c94f2a', fontFamily: 'Outfit, sans-serif', borderRadius: '10px' },
    elements: {
      card: 'box-shadow:none;padding:0;border:none;',
      formButtonPrimary: 'background:#c94f2a;font-family:Outfit,sans-serif;font-weight:700;',
      footerActionLink: 'color:#c94f2a;font-weight:600;',
      headerTitle: 'font-family:Cormorant Garamond,serif;font-size:26px;'
    }
  };
  var opts = {
    routing: 'virtual',
    appearance: appearance,
    afterSignInUrl: window.location.href,
    afterSignUpUrl: window.location.href
  };
  try {
    mount.innerHTML = '';
    if (type === 'signup') window.Clerk.mountSignUp(mount, opts);
    else window.Clerk.mountSignIn(mount, opts);
  } catch(e) {
    // If mounting fails, redirect to hosted pages
    var returnUrl = encodeURIComponent(window.location.href);
    if (type === 'signup') {
      window.location.href = 'https://accounts.pix2print.net/sign-up?redirect_url=' + returnUrl;
    } else {
      window.location.href = 'https://accounts.pix2print.net/sign-in?redirect_url=' + returnUrl;
    }
  }
}

function closeAuthModal() {
  document.getElementById('auth-modal').style.display = 'none';
  var mount = document.getElementById('clerk-mount-point');
  var loading = document.getElementById('auth-loading');
  if (mount) mount.innerHTML = '';
  if (loading) loading.style.display = 'block';
}

function openUpgradeModal() {
  document.getElementById('upgrade-modal').style.display = 'flex';
}

function scrollToApp() {
  // Hide hero, show tool
  var hero = document.getElementById('hero-section');
  if (hero) hero.style.display = 'none';
  window.scrollTo({top: 0, behavior: 'smooth'});
}

function setLang(lang) {
  currentLang = lang;
  var en = document.getElementById('lt-en');
  var es = document.getElementById('lt-es');
  if (!en || !es) return;
  if (lang === 'en') {
    en.style.background = '#1a1612'; en.style.color = '#f7f4ef';
    es.style.background = 'transparent'; es.style.color = '#7a746a';
  } else {
    es.style.background = '#1a1612'; es.style.color = '#f7f4ef';
    en.style.background = 'transparent'; en.style.color = '#7a746a';
  }
}

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeAuthModal();
    var ids = ['upgrade-modal','legal-modal'];
    ids.forEach(function(id) {
      var el = document.getElementById(id);
      if (el) el.style.display = 'none';
    });
  }
});

// USAGE TRACKING
window.addEventListener('load', function() {
  setTimeout(function() {
    if (typeof startProc === 'function') {
      var orig = startProc;
      window.startProc = function() {
        if (clerkUser) {
          imagesUsed++;
          localStorage.setItem('px2_' + clerkUser.id, imagesUsed);
          if (userPlan === 'free' && imagesUsed > FREE_LIMIT) {
            openUpgradeModal();
            toast('Upgrade to Pro to continue');
            return;
          }
        }
        orig();
        if (!clerkUser) setTimeout(function() { toast('Sign up free to save your results'); }, 3000);
      };
    }
  }, 600);
});

// LEGAL
var LEGAL = {
  privacy: { title: 'Privacy Policy', updated: 'Last Updated: February 2026', body: '<h3>1. Information We Collect</h3><p>We collect email address, payment info (via Stripe), uploaded images (temporary), and technical data. We do not collect unnecessary data.</p><h3>2. Image Processing</h3><p>Images are processed for enhancement only — not stored permanently, not used for AI training, deleted after processing.</p><h3>3. Payments</h3><p>Processed via Stripe. We do not store card details.</p><h3>4. User Rights</h3><p>Request access, deletion, or correction of data at: <a href="mailto:support@pix2print.net" style="color:#c94f2a;">support@pix2print.net</a></p>' },
  terms: { title: 'Terms of Service', updated: 'Last Updated: February 2026', body: '<h3>1. Acceptance</h3><p>By using Pix2Print you agree to these Terms.</p><h3>2. Your Content</h3><p>You confirm you own all rights to images you upload. Pix2Print claims no ownership of your content.</p><h3>3. Liability</h3><p>Total liability shall not exceed the greater of amounts paid in the preceding 12 months or USD $100.</p><h3>4. Governing Law</h3><p>Governed by United States law.</p>' },
  dmca: { title: 'DMCA Policy', updated: 'Last Updated: February 2026', body: '<p>To report copyright infringement, email <a href="mailto:dmca@pix2print.net" style="color:#c94f2a;">dmca@pix2print.net</a> with: your contact info, the copyrighted work description, description of infringement, and your signature.</p>' },
  refunds: { title: 'Refund Policy', updated: 'Last Updated: February 2026', body: '<p>Purchases are generally final. Refunds granted for: technical malfunction, duplicate payment, or processing failure. Request within 7 days at <a href="mailto:support@pix2print.net" style="color:#c94f2a;">support@pix2print.net</a>.</p>' }
};

function showLegal(section) {
  var doc = LEGAL[section];
  if (!doc) return;
  ['privacy','terms','dmca','refunds'].forEach(function(t) {
    var btn = document.getElementById('tab-' + t);
    if (!btn) return;
    btn.style.background = t === section ? '#c94f2a' : 'transparent';
    btn.style.color = t === section ? 'white' : '#7a746a';
    btn.style.borderColor = t === section ? '#c94f2a' : 'rgba(26,22,18,.12)';
  });
  var content = document.getElementById('legal-content');
  if (!content) return;
  content.innerHTML = '<h2 style="font-family:Cormorant Garamond,serif;font-size:24px;margin:0 0 4px;">' + doc.title + '</h2><p style="font-size:11px;color:#7a746a;margin:0 0 20px;padding-bottom:16px;border-bottom:1px solid rgba(26,22,18,.08);">' + doc.updated + '</p><style>#legal-content h3{font-size:14px;font-weight:700;margin:18px 0 6px;}#legal-content p,#legal-content li{color:#5a5550;line-height:1.7;}</style>' + doc.body;
  document.getElementById('legal-modal').style.display = 'flex';
}

var s = document.createElement('style');
s.textContent = '@keyframes px2Pulse{0%,100%{opacity:1;}50%{opacity:.4;}}';
document.head.appendChild(s);

// ── STRIPE PAYMENTS
var stripe = null;
window.addEventListener('load', function() {
  setTimeout(function() {
    if (window.Stripe) {
      stripe = window.Stripe('pk_live_51T2BUnGstLpSKLSjHumSTv0mG2vTmw4Zv6SUMiG2DhngC7wNGNE5djPRoKRVrP9gD8DPyb04mfJEbeyUnLQI3b4u00PluVzqWh');
    }
  }, 500);
});

async function startCheckout(plan) {
  if (!clerkUser) {
    window._pendingCheckout = plan;
    openAuthModal('signup');
    toast('Regístrate para continuar con tu plan');
    return;
  }

  var PRICES = {
    'pro':       { id: 'price_1T2JH7GstLpSKLSj7izBAXHp', mode: 'subscription' },
    'unlimited': { id: 'price_1T2JIDGstLpSKLSjuHRP9K97', mode: 'subscription' },
    'pack5':     { id: 'PACK5_PENDING', mode: 'payment' },
    'pack10':    { id: 'PACK10_PENDING', mode: 'payment' }
  };

  var planData = PRICES[plan];
  if (!planData) { toast('Plan no encontrado'); return; }

  if (planData.id.indexOf('PENDING') > -1) {
    toast('Este plan estará disponible muy pronto. Contáctanos en soporte.');
    return;
  }

  toast('Preparando pago seguro...');
  console.log('Starting checkout for plan:', plan, 'priceId:', planData.id);

  try {
    var userEmail = clerkUser.primaryEmailAddress ? clerkUser.primaryEmailAddress.emailAddress : '';

    var response = await fetch('/.netlify/functions/stripe-checkout', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        priceId: planData.id,
        mode: planData.mode,
        email: userEmail,
        successUrl: 'https://pix2print.net/?payment=success&plan=' + plan,
        cancelUrl: 'https://pix2print.net/?payment=cancelled'
      })
    });

    var data = await response.json();
    if (data.url) {
      window.location.href = data.url;
    } else {
      throw new Error(data.error || 'No checkout URL returned');
    }
  } catch(e) {
    console.error('Checkout error:', e);
    toast('Error: ' + (e.message || 'Intenta de nuevo'));
  }
}

// Check for payment success on page load
window.addEventListener('load', function() {
  var params = new URLSearchParams(window.location.search);
  if (params.get('payment') === 'success') {
    var plan = params.get('plan') || 'pro';
    userPlan = plan;
    if (clerkUser) localStorage.setItem('px2_plan_' + clerkUser.id, plan);
    // Hide hero, show tool
    var hero = document.getElementById('hero-section');
    if (hero) hero.style.display = 'none';
    toast('🎉 ¡Bienvenido! Tu cuenta ha sido activada.');
    window.history.replaceState({}, '', window.location.pathname);
  }
  if (params.get('payment') === 'cancelled') {
    toast('Payment cancelled. You can upgrade anytime.');
    window.history.replaceState({}, '', window.location.pathname);
  }
});


// ══════════════════════════════════════════
// REAL-ESRGAN — IA Upscaling via Replicate
// ══════════════════════════════════════════

var REPLICATE_TOKEN = 'SECURED_VIA_NETLIFY_FUNCTION';

// Override the engine's startProc to use Real-ESRGAN
window.addEventListener('load', function() {
  setTimeout(function() {
    // Patch the Process button to use Real-ESRGAN
    var procBtn = document.getElementById('proc-btn');
    if (procBtn) {
      procBtn.addEventListener('click', function(e) {
        e.stopImmediatePropagation();
        runRealESRGAN();
      }, true);
    }
  }, 800);
});

async function runRealESRGAN() {
  var base64 = ST.file ? await fileToBase64(ST.file) : (ST.src || ST.originalURL);
  if (!base64 || base64.length < 100) { toast('Sube una imagen primero'); return; }

  var isLocalDev = window.location.hostname === 'localhost';
  if (!isLocalDev && !clerkUser) { openAuthModal('signup'); return; }
  if (!isLocalDev && userPlan === 'free' && imagesUsed >= 5) { openUpgradeModal(); return; }

  var scale = 3;
  var productScale = ST.scale || 4;

  document.querySelectorAll('.screen,.proc-wrap').forEach(s => s.classList.remove('act'));
  var pw = document.getElementById('proc-wrap');
  if (pw) pw.classList.add('act');
  updateProgress('Enviando a Real-ESRGAN...', 15);

  try {
    var r = await fetch('/.netlify/functions/replicate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ image: base64, scale: scale })
    });
    if (!r.ok) {
      var e = await r.json().catch(() => ({}));
      throw new Error(e.error || 'Error ' + r.status);
    }
    var d = await r.json();
    if (!d.id) throw new Error('Sin prediction ID');

    updateProgress('Mejorando con IA...', 30);
    var result = await pollReplicate(d.id);
    if (!result || !result.output) throw new Error('Sin resultado');

    updateProgress('Descargando...', 90);
    var imgR = await fetch(result.output);
    var blob = await imgR.blob();
    var url = URL.createObjectURL(blob);

    ST.enhancedURL = url;
    ST.resultUrl = url;
    ST.resultBlob = blob;
    ST.upscaleDone = true;
    ST.usingAIEngine = true;
    ST.beforeURL = ST.beforeURL || ST.originalURL;

    imagesUsed++;
    if (clerkUser) localStorage.setItem('px2_' + clerkUser.id, imagesUsed);
    updateProgress('¡Listo!', 100);
    setTimeout(function() { showRealESRGANResult(url, scale); }, 300);

  } catch(e) {
    console.error('runRealESRGAN error:', e);
    document.querySelectorAll('.screen,.proc-wrap').forEach(s => s.classList.remove('act'));
    var sc3 = document.getElementById('sc3');
    if (sc3) sc3.classList.add('act');
    toast('Error: ' + (e.message || 'Intenta de nuevo'));
  }
}

    var chipNew = document.getElementById('chip-new');
    var rChipNew = document.getElementById('r-chip-new');
    var osNew = document.getElementById('os-new');
    var osScaleL = document.getElementById('os-scale-l');
    
    if (chipNew) chipNew.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
    if (rChipNew) rChipNew.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
    if (osNew) osNew.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
    if (osScaleL) osScaleL.textContent = totalScale + '× upscale';
    
    // Actualizar DPI con dimensiones reales
    var outDpi = 0;
    if (ST.preset) {
      var p = ST.preset;
      var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
      var I = 2.54; // pulgadas a cm
      outDpi = Math.round(Math.min(finalW / ((sd.w || 20) / I), finalH / ((sd.h || 20) / I)) || 0);
      
      var dpiAft = document.getElementById('dpi-aft');
      var osDpi = document.getElementById('os-dpi');
      var osDpiS = document.getElementById('os-dpi-s');
      
      if (dpiAft) dpiAft.textContent = outDpi + ' DPI';
      if (osDpi) osDpi.textContent = outDpi;
      if (osDpiS) osDpiS.textContent = outDpi >= (ST.dpi || 300) ? '✅ Suficiente' : '⚠ Mejorado';
      
      // CRÍTICO: Actualizar checklist de impresión (solo si hay preset)
      updatePrintChecklist(finalW, finalH, totalScale, outDpi);
    } else {
      console.warn('⚠️ ST.preset no encontrado, no se puede actualizar checklist');
    }
  }
  
  // Función para actualizar el checklist de impresión
  function updatePrintChecklist(outW, outH, scale, dpi) {
    var rChecklist = document.getElementById('r-checklist');
    if (!rChecklist) {
      console.warn('⚠️ r-checklist no encontrado');
      return;
    }
    
    if (!ST.preset) {
      console.warn('⚠️ ST.preset no encontrado, no se puede actualizar checklist');
      return;
    }
    
    var p = ST.preset;
    var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
    var fmt = ST.bgRemove ? 'PNG' : ST.fmt;
    var dpiPct = dpi >= (ST.dpi || 300) ? 100 : Math.round((dpi / (ST.dpi || 300)) * 100);
    
    const checks = [
      {ok: true, t: `Resolución: ${outW.toLocaleString()}×${outH.toLocaleString()}px`},
      {ok: dpiPct >= 60, t: `DPI: ${dpi} → objetivo ${ST.dpi || 300} DPI`},
      {ok: true, t: `Upscale ${scale}× neural · Real-ESRGAN AI aplicado`},
      {ok: true, t: `Formato: ${fmt} listo para imprimir`},
      {ok: ST.bgRemove, t: ST.bgRemove ? 'Fondo eliminado · PNG transparente' : 'Fondo original mantenido', opt: true},
      {ok: !p.bleed, t: p.bleed ? 'Bleed 3mm incluido automáticamente' : 'Sin sangrado requerido'},
      {ok: true, t: `Producto: ${p.name}${p.shirt ? ' talla ' + ST.shirtSz : ''}`},
    ];
    
    rChecklist.innerHTML = checks.map(c => `
      <div class="chk">
        <span style="font-size:13px;flex-shrink:0;">${c.ok ? '✅' : c.opt ? 'ℹ️' : '⚠️'}</span>
        <span style="font-size:12px;color:${c.ok ? 'var(--green)' : c.opt ? 'var(--muted)' : 'var(--gold)'};">${c.t}</span>
      </div>`).join('');
    
    console.log('✅ Checklist de impresión actualizado');
    
    // También actualizar r-alerts
    var rAlerts = document.getElementById('r-alerts');
    if (rAlerts) {
      rAlerts.innerHTML = dpiPct >= 60
        ? `<div class="al al-ok" style="margin-bottom:10px;">✅ Imagen mejorada ${scale}× · Calidad óptima para ${p.name} a ${ST.dpi || 300} DPI.</div>`
        : `<div class="al al-warn" style="margin-bottom:10px;">⚠️ Upscale ${scale}× aplicado. Recuerda que imágenes muy pequeñas tienen limitaciones físicas de detalle.</div>`;
    }
  }
  
  // Actualizar comparador principal (pantalla 3)
  var imgBefore = document.getElementById('img-before');
  var imgAfter = document.getElementById('img-after');
  var csBefore = document.getElementById('cs-before');
  var csAfter = document.getElementById('cs-after');
  
  if (imgBefore) {
    var beforeSrc = ST.originalURL || ST.beforeURL || '';
    imgBefore.src = beforeSrc;
    imgBefore.style.filter = 'none';
    imgBefore.style.display = 'block';
    imgBefore.style.width = '100%';
    imgBefore.style.height = '100%';
    imgBefore.style.objectFit = 'contain';
    imgBefore.onload = function() {
      console.log('✅ img-before cargado correctamente:', beforeSrc);
      if (csBefore) csBefore.style.display = 'block';
    };
    imgBefore.onerror = function() {
      console.error('❌ Error al cargar img-before:', beforeSrc);
    };
    console.log('img-before actualizado:', beforeSrc);
  }
  
  if (imgAfter) {
    console.log('🖼️ Actualizando img-after con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    imgAfter.src = url;
    imgAfter.style.filter = 'none';
    imgAfter.style.display = 'block';
    imgAfter.style.width = '100%';
    imgAfter.style.height = '100%';
    imgAfter.style.objectFit = 'contain';
    imgAfter.onload = function() {
      console.log('✅ img-after cargado correctamente:', url);
      if (csAfter) csAfter.style.display = 'block';
    };
    imgAfter.onerror = function() {
      console.error('❌ Error al cargar img-after:', url);
    };
    console.log('img-after actualizado:', url);
  }
  
  // Asegurar que los contenedores sean visibles
  if (csBefore) {
    csBefore.style.display = 'block';
    csBefore.style.opacity = '1';
  }
  if (csAfter) {
    csAfter.style.display = 'block';
    csAfter.style.opacity = '1';
  }
  
  // Ocultar overlay "not-proc"
  var notProc = document.getElementById('not-proc');
  if (notProc) {
    notProc.style.display = 'none';
    console.log('Overlay not-proc ocultado');
  }
  
  // Actualizar datos de resolución en el comparador principal
  // Nota: Estos se actualizarán con las dimensiones reales cuando la imagen cargue
  var chipOrig = document.getElementById('chip-orig');
  var chipNew = document.getElementById('chip-new');
  if (chipOrig) chipOrig.textContent = originalW + '×' + originalH;
  // chipNew se actualizará con dimensiones reales en updateResultStats
  
  // Actualizar DPI (estimado) - usar la misma lógica que updSzInfo
  var dpiBef = document.getElementById('dpi-bef');
  var dpiAft = document.getElementById('dpi-aft');
  var osDpi = document.getElementById('os-dpi');
  var osDpiS = document.getElementById('os-dpi-s');
  
  if (ST.preset) {
    var p = ST.preset;
    var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
    var I = 2.54; // pulgadas a cm
    
    // DPI actual (original)
    var curDpi = Math.round(Math.min(originalW / ((sd.w || 20) / I), originalH / ((sd.h || 20) / I)) || 0);
    if (dpiBef) dpiBef.textContent = curDpi + ' DPI';
    
    // DPI mejorado se actualizará con dimensiones reales en updateResultStats
  }
  
  // Actualizar datos en la barra inferior
  // Nota: osNew y osScaleL se actualizarán con dimensiones reales en updateResultStats
  var osOrig = document.getElementById('os-orig');
  if (osOrig) osOrig.textContent = originalW + '×' + originalH;
  // osNew y osScaleL se actualizarán con dimensiones reales cuando la imagen cargue
  
  // Actualizar comparador en pantalla de resultado (sc4)
  var rImgBefore = document.getElementById('r-img-before');
  var rImgAfter = document.getElementById('r-img-after');
  var rCsBefore = document.getElementById('r-cs-before');
  var rCsAfter = document.getElementById('r-cs-after');
  
  if (rImgBefore) {
    var rBeforeSrc = ST.originalURL || ST.beforeURL || '';
    rImgBefore.src = rBeforeSrc;
    rImgBefore.style.display = 'block';
    rImgBefore.style.width = '100%';
    rImgBefore.style.height = '100%';
    rImgBefore.style.objectFit = 'contain';
    rImgBefore.onload = function() {
      console.log('✅ r-img-before cargado correctamente:', rBeforeSrc);
      if (rCsBefore) rCsBefore.style.display = 'block';
    };
    rImgBefore.onerror = function() {
      console.error('❌ Error al cargar r-img-before:', rBeforeSrc);
    };
    console.log('r-img-before actualizado:', rBeforeSrc);
  }
  
  if (rImgAfter) {
    console.log('🖼️ Actualizando r-img-after con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    rImgAfter.src = url;
    rImgAfter.style.display = 'block';
    rImgAfter.style.width = '100%';
    rImgAfter.style.height = '100%';
    rImgAfter.style.objectFit = 'contain';
    rImgAfter.onload = function() {
      console.log('✅ r-img-after cargado correctamente:', url);
      if (rCsAfter) rCsAfter.style.display = 'block';
    };
    rImgAfter.onerror = function() {
      console.error('❌ Error al cargar r-img-after:', url);
    };
    console.log('r-img-after actualizado:', url);
  }
  
  // Asegurar que los contenedores sean visibles
  if (rCsBefore) {
    rCsBefore.style.display = 'block';
    rCsBefore.style.opacity = '1';
  }
  if (rCsAfter) {
    rCsAfter.style.display = 'block';
    rCsAfter.style.opacity = '1';
  }
  
  // Reinicializar el comparador para que funcione el slider
  if (typeof initCompare === 'function') {
    setTimeout(function() {
      initCompare();
      console.log('Comparador reinicializado');
    }, 100);
  }
  
  // Actualizar datos en el comparador de resultado
  // Nota: rChipNew se actualizará con dimensiones reales en updateResultStats
  var rChipOrig = document.getElementById('r-chip-orig');
  if (rChipOrig) rChipOrig.textContent = originalW + '×' + originalH;
  
  // Actualizar otros elementos de resultado
  var resultImg = document.getElementById('result-img');
  if (resultImg) {
    console.log('🖼️ Actualizando result-img con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    resultImg.src = url;
  }
  
  var afterImg = document.getElementById('after-img');
  if (afterImg) {
    console.log('🖼️ Actualizando after-img con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    afterImg.src = url;
  }
  
  // Actualizar mockup editor si existe
  var designEl = document.getElementById('design-el');
  if (designEl) {
    var mockupImg = designEl.querySelector('img');
    if (mockupImg) mockupImg.src = url;
  }
  
  // Los campos de estadísticas se actualizarán cuando la imagen cargue
  // mediante la función updateResultStats() que se llama en imgForDimensions.onload

  // Update download button
  var dlBtn = document.getElementById('dl-btn');
  if (dlBtn) {
    dlBtn.onclick = function() {
      // Gate: ask for login only at download
      var isLocalDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
      if (!isLocalDev && !clerkUser) {
        openAuthModal('signup');
        toast('Regístrate gratis para descargar tu imagen');
        return;
      }
      // Check plan limits (solo en producción)
      if (!isLocalDev) {
        if (userPlan === 'free' && imagesUsed >= 2) {
          document.getElementById('pricing-section').scrollIntoView({behavior:'smooth'});
          toast('Has usado tus 2 imágenes gratis. Elige un plan para continuar.');
          return;
        }
        if ((userPlan === 'pack5' && imagesUsed >= 5) || (userPlan === 'pack10' && imagesUsed >= 10)) {
          document.getElementById('pricing-section').scrollIntoView({behavior:'smooth'});
          toast('Has agotado tu pack. Compra otro para continuar.');
          return;
        }
      }
      // Allow download - VERIFICAR que se descarga la imagen mejorada
      console.log('💾 Preparando descarga de imagen mejorada...');
      console.log('URL de descarga:', url);
      console.log('¿Es blob URL?', url.startsWith('blob:'));
      
      // Verificar que no sea la imagen original
      if (url === ST.originalURL || url === ST.src) {
        console.error('❌ ERROR CRÍTICO: Se está descargando la imagen ORIGINAL en lugar de la mejorada!');
        toast('❌ Error: Se detectó que se descargaría la imagen original. Por favor, reporta este error.');
        return;
      }
      
      imagesUsed++;
      if (clerkUser) localStorage.setItem('px2_' + clerkUser.id, imagesUsed);
      updateAuthUI(clerkUser); // refresh credits display
      
      var a = document.createElement('a');
      a.href = url;
      a.download = 'pix2print_' + scale + 'x_enhanced_' + Date.now() + '.png';
      console.log('📥 Descargando:', a.download);
      a.click();
      toast('✅ Imagen mejorada descargada (Real-ESRGAN)');
    };
  }
  
  // Actualizar botón de mejora
  var upscaleBtn = document.getElementById('upscale-btn');
  if (upscaleBtn) {
    upscaleBtn.disabled = false;
    upscaleBtn.textContent = '✓ Mejorado — repetir';
  }

  // IMPORTANTE: Mantener en pantalla 3 (comparador) para que el usuario vea la imagen mejorada
  // Solo cambiar a pantalla 4 cuando el usuario haga clic en "Generar archivo final"
  var sc3 = document.getElementById('sc3');
  if (sc3) {
    // Asegurar que estamos en pantalla 3
    document.querySelectorAll('.screen,.proc-wrap').forEach(s => s.classList.remove('act'));
    sc3.classList.add('act');
    
    // Ocultar el overlay de procesamiento si existe
    var procWrap = document.getElementById('proc-wrap');
    if (procWrap) procWrap.classList.remove('act');
    
    // Actualizar stepbar para mostrar paso 3 activo
    for (var i = 1; i <= 3; i++) {
      var si = document.getElementById('si' + i);
      if (si) { si.classList.remove('act'); si.classList.add('done'); }
    }
    var si3 = document.getElementById('si3');
    if (si3) { si3.classList.remove('done'); si3.classList.add('act'); }
    
    // Asegurar que el botón "Generar archivo final" esté visible y funcional
    // (ya está en el HTML, solo necesitamos asegurar que ST.upscaleDone esté en true)
    console.log('✅ Mostrando pantalla 3 con imagen mejorada - El usuario puede ver la comparación antes/después');
    console.log('ℹ️ Para ver el resultado final, el usuario debe hacer clic en "Generar archivo final"');
    console.log('✅ ST.upscaleDone =', ST.upscaleDone, '- El botón "Generar archivo final" está habilitado');
  } else {
    // Si no existe sc3, ir directo a sc4 (fallback)
    console.warn('⚠️ Pantalla 3 no encontrada, yendo a pantalla 4');
    document.querySelectorAll('.screen,.proc-wrap').forEach(s => s.classList.remove('act'));
    var sc4 = document.getElementById('sc4');
    if (sc4) sc4.classList.add('act');
    
    // Update stepbar
    for (var i = 1; i <= 4; i++) {
      var si = document.getElementById('si' + i);
      if (si) { si.classList.remove('act'); si.classList.add('done'); }
    }
  }

  console.log('✅ showRealESRGANResult completado');
  
  // Mostrar mensaje según el motor usado
  if (ST.usingAIEngine) {
    toast('🎉 ¡Imagen mejorada con Real-ESRGAN (IA)! La calidad ha sido mejorada realmente, no solo aumentado el tamaño.', 6000);
  } else {
    toast('⚠️ Imagen procesada con motor estándar. Solo aumenta el tamaño, no mejora la calidad real. Recarga créditos en Replicate para usar Real-ESRGAN (IA).', 8000);
  }
}

async function pollReplicate(predictionId) {
  console.log('Iniciando polling para prediction:', predictionId);
  var maxAttempts = 60; // 60 seconds max
  for (var i = 0; i < maxAttempts; i++) {
    await sleep(1000);
    
    var progress = Math.min(30 + (i * 1.5), 88);
    updateProgress('Mejorando con IA... ' + Math.round(progress) + '%', progress);

    try {
      var response = await fetch('/.netlify/functions/replicate?id=' + predictionId);
      
      if (!response.ok) {
        console.error('Error en polling:', response.status);
        var errorText = await response.text();
        throw new Error('Error al consultar estado: ' + response.status + ' - ' + errorText);
      }
      
      var data = await response.json();
      console.log('Estado de predicción (intento ' + (i + 1) + '):', data.status);
      
      if (data.status === 'succeeded') {
        console.log('✅ Predicción Real-ESRGAN completada exitosamente');
        console.log('🎉 Imagen mejorada con IA lista para descargar');
        return data;
      }
      if (data.status === 'failed') {
        console.error('❌ Predicción falló:', data.error);
        throw new Error('Model failed: ' + (data.error || 'Unknown error'));
      }
      // Si está 'starting' o 'processing', continuar
    } catch (e) {
      console.error('Error en polling (intento ' + (i + 1) + '):', e);
      // Continuar intentando a menos que sea el último intento
      if (i === maxAttempts - 1) {
        throw new Error('Timeout después de ' + maxAttempts + ' intentos: ' + e.message);
      }
    }
  }
  throw new Error('Timeout después de ' + maxAttempts + ' intentos');
}

function showRealESRGANResult(url, scale) {
  console.log('showRealESRGANResult llamado con URL:', url, 'scale:', scale);
  
  // Guardar la imagen mejorada en ST
  ST.enhancedURL = url;
  ST.upscaleDone = true;
  if (!ST.beforeURL && ST.originalURL) {
    ST.beforeURL = ST.originalURL;
  }
  
  // Obtener dimensiones originales
  var originalW = ST.imgW || 0;
  var originalH = ST.imgH || 0;
  
  // Calcular dimensiones mejoradas (inicialmente basadas en escala)
  // Pero las dimensiones reales se obtendrán de la imagen cargada
  var enhancedW = originalW * scale;
  var enhancedH = originalH * scale;
  
  console.log('Dimensiones calculadas:', {
    original: originalW + 'x' + originalH,
    enhanced: enhancedW + 'x' + enhancedH,
    scale: scale
  });
  
  // Cargar imagen para obtener dimensiones reales
  var imgForDimensions = new Image();
  imgForDimensions.onload = function() {
    // Usar dimensiones reales de la imagen cargada
    var realEnhancedW = imgForDimensions.naturalWidth;
    var realEnhancedH = imgForDimensions.naturalHeight;
    
    console.log('Dimensiones reales de imagen mejorada:', realEnhancedW + 'x' + realEnhancedH);
    
    // Actualizar campos de estadísticas con dimensiones reales
    updateResultStats(realEnhancedW, realEnhancedH, scale);
  };
  imgForDimensions.onerror = function() {
    console.warn('No se pudo cargar imagen para obtener dimensiones, usando calculadas');
    // Si no se puede cargar, usar dimensiones calculadas
    updateResultStats(enhancedW, enhancedH, scale);
  };
  imgForDimensions.src = url;
  
  // Función auxiliar para actualizar estadísticas
  function updateResultStats(finalW, finalH, finalScale) {
    // CRÍTICO: Actualizar campos de estadísticas en pantalla de resultado
    // Estos campos estaban vacíos porque showRealESRGANResult no los actualizaba
    var rRes = document.getElementById('r-res');
    var rResS = document.getElementById('r-res-s');
    var rPhys = document.getElementById('r-phys');
    var rPresetS = document.getElementById('r-preset-s');
    var rScale = document.getElementById('r-scale');
    
    // Calcular escala total (puede ser diferente si se aplicó escalado adicional)
    // Prioridad: ST.finalScale (si se aplicó escalado adicional) > ST.scale (escala del producto) > finalScale (escala de calidad)
    var totalScale = ST.finalScale || ST.scale || finalScale;
    console.log('📊 Escala total calculada:', {
      finalScale: ST.finalScale,
      productScale: ST.scale,
      qualityScale: finalScale,
      total: totalScale
    });
    
    // Actualizar Res. final con dimensiones reales
    if (rRes) {
      rRes.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
      console.log('✅ r-res actualizado:', finalW + '×' + finalH);
    }
    if (rResS) {
      rResS.textContent = totalScale + '× upscale neural aplicado';
      console.log('✅ r-res-s actualizado:', totalScale + '× upscale neural aplicado');
    }
    
    // Actualizar Tamaño físico
    if (ST.preset) {
      var p = ST.preset;
      var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
      if (rPhys) {
        rPhys.textContent = sd.w + '×' + sd.h + 'cm';
        console.log('✅ r-phys actualizado:', sd.w + '×' + sd.h + 'cm');
      }
      if (rPresetS) {
        rPresetS.textContent = p.name + (p.shirt ? ' · ' + ST.shirtSz : '');
        console.log('✅ r-preset-s actualizado:', p.name);
      }
    } else {
      // Si no hay preset, usar valores por defecto
      if (rPhys) {
        rPhys.textContent = '—';
      }
      if (rPresetS) {
        rPresetS.textContent = '—';
      }
    }
    
    // Actualizar Upscale
    if (rScale) {
      rScale.textContent = totalScale + '×';
      console.log('✅ r-scale actualizado:', totalScale + '×');
    }
    
    // También actualizar otros elementos con dimensiones reales
    var chipNew = document.getElementById('chip-new');
    var rChipNew = document.getElementById('r-chip-new');
    var osNew = document.getElementById('os-new');
    var osScaleL = document.getElementById('os-scale-l');
    
    if (chipNew) chipNew.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
    if (rChipNew) rChipNew.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
    if (osNew) osNew.textContent = finalW.toLocaleString() + '×' + finalH.toLocaleString();
    if (osScaleL) osScaleL.textContent = totalScale + '× upscale';
    
    // Actualizar DPI con dimensiones reales
    var outDpi = 0;
    if (ST.preset) {
      var p = ST.preset;
      var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
      var I = 2.54; // pulgadas a cm
      outDpi = Math.round(Math.min(finalW / ((sd.w || 20) / I), finalH / ((sd.h || 20) / I)) || 0);
      
      var dpiAft = document.getElementById('dpi-aft');
      var osDpi = document.getElementById('os-dpi');
      var osDpiS = document.getElementById('os-dpi-s');
      
      if (dpiAft) dpiAft.textContent = outDpi + ' DPI';
      if (osDpi) osDpi.textContent = outDpi;
      if (osDpiS) osDpiS.textContent = outDpi >= (ST.dpi || 300) ? '✅ Suficiente' : '⚠ Mejorado';
      
      // CRÍTICO: Actualizar checklist de impresión (solo si hay preset)
      updatePrintChecklist(finalW, finalH, totalScale, outDpi);
    } else {
      console.warn('⚠️ ST.preset no encontrado, no se puede actualizar checklist');
    }
  }
  
  // Función para actualizar el checklist de impresión
  function updatePrintChecklist(outW, outH, scale, dpi) {
    var rChecklist = document.getElementById('r-checklist');
    if (!rChecklist) {
      console.warn('⚠️ r-checklist no encontrado');
      return;
    }
    
    if (!ST.preset) {
      console.warn('⚠️ ST.preset no encontrado, no se puede actualizar checklist');
      return;
    }
    
    var p = ST.preset;
    var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
    var fmt = ST.bgRemove ? 'PNG' : ST.fmt;
    var dpiPct = dpi >= (ST.dpi || 300) ? 100 : Math.round((dpi / (ST.dpi || 300)) * 100);
    
    const checks = [
      {ok: true, t: `Resolución: ${outW.toLocaleString()}×${outH.toLocaleString()}px`},
      {ok: dpiPct >= 60, t: `DPI: ${dpi} → objetivo ${ST.dpi || 300} DPI`},
      {ok: true, t: `Upscale ${scale}× neural · Real-ESRGAN AI aplicado`},
      {ok: true, t: `Formato: ${fmt} listo para imprimir`},
      {ok: ST.bgRemove, t: ST.bgRemove ? 'Fondo eliminado · PNG transparente' : 'Fondo original mantenido', opt: true},
      {ok: !p.bleed, t: p.bleed ? 'Bleed 3mm incluido automáticamente' : 'Sin sangrado requerido'},
      {ok: true, t: `Producto: ${p.name}${p.shirt ? ' talla ' + ST.shirtSz : ''}`},
    ];
    
    rChecklist.innerHTML = checks.map(c => `
      <div class="chk">
        <span style="font-size:13px;flex-shrink:0;">${c.ok ? '✅' : c.opt ? 'ℹ️' : '⚠️'}</span>
        <span style="font-size:12px;color:${c.ok ? 'var(--green)' : c.opt ? 'var(--muted)' : 'var(--gold)'};">${c.t}</span>
      </div>`).join('');
    
    console.log('✅ Checklist de impresión actualizado');
    
    // También actualizar r-alerts
    var rAlerts = document.getElementById('r-alerts');
    if (rAlerts) {
      rAlerts.innerHTML = dpiPct >= 60
        ? `<div class="al al-ok" style="margin-bottom:10px;">✅ Imagen mejorada ${scale}× · Calidad óptima para ${p.name} a ${ST.dpi || 300} DPI.</div>`
        : `<div class="al al-warn" style="margin-bottom:10px;">⚠️ Upscale ${scale}× aplicado. Recuerda que imágenes muy pequeñas tienen limitaciones físicas de detalle.</div>`;
    }
  }
  
  // Actualizar comparador principal (pantalla 3)
  var imgBefore = document.getElementById('img-before');
  var imgAfter = document.getElementById('img-after');
  var csBefore = document.getElementById('cs-before');
  var csAfter = document.getElementById('cs-after');
  
  if (imgBefore) {
    var beforeSrc = ST.originalURL || ST.beforeURL || '';
    imgBefore.src = beforeSrc;
    imgBefore.style.filter = 'none';
    imgBefore.style.display = 'block';
    imgBefore.style.width = '100%';
    imgBefore.style.height = '100%';
    imgBefore.style.objectFit = 'contain';
    imgBefore.onload = function() {
      console.log('✅ img-before cargado correctamente:', beforeSrc);
      if (csBefore) csBefore.style.display = 'block';
    };
    imgBefore.onerror = function() {
      console.error('❌ Error al cargar img-before:', beforeSrc);
    };
    console.log('img-before actualizado:', beforeSrc);
  }
  
  if (imgAfter) {
    console.log('🖼️ Actualizando img-after con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    imgAfter.src = url;
    imgAfter.style.filter = 'none';
    imgAfter.style.display = 'block';
    imgAfter.style.width = '100%';
    imgAfter.style.height = '100%';
    imgAfter.style.objectFit = 'contain';
    imgAfter.onload = function() {
      console.log('✅ img-after cargado correctamente:', url);
      if (csAfter) csAfter.style.display = 'block';
    };
    imgAfter.onerror = function() {
      console.error('❌ Error al cargar img-after:', url);
    };
    console.log('img-after actualizado:', url);
  }
  
  // Asegurar que los contenedores sean visibles
  if (csBefore) {
    csBefore.style.display = 'block';
    csBefore.style.opacity = '1';
  }
  if (csAfter) {
    csAfter.style.display = 'block';
    csAfter.style.opacity = '1';
  }
  
  // Ocultar overlay "not-proc"
  var notProc = document.getElementById('not-proc');
  if (notProc) {
    notProc.style.display = 'none';
    console.log('Overlay not-proc ocultado');
  }
  
  // Actualizar datos de resolución en el comparador principal
  // Nota: Estos se actualizarán con las dimensiones reales cuando la imagen cargue
  var chipOrig = document.getElementById('chip-orig');
  var chipNew = document.getElementById('chip-new');
  if (chipOrig) chipOrig.textContent = originalW + '×' + originalH;
  // chipNew se actualizará con dimensiones reales en updateResultStats
  
  // Actualizar DPI (estimado) - usar la misma lógica que updSzInfo
  var dpiBef = document.getElementById('dpi-bef');
  var dpiAft = document.getElementById('dpi-aft');
  var osDpi = document.getElementById('os-dpi');
  var osDpiS = document.getElementById('os-dpi-s');
  
  if (ST.preset) {
    var p = ST.preset;
    var sd = p.shirt ? (SIZES[ST.shirtSz] || {w: p.w, h: p.h}) : {w: p.w || 20, h: p.h || 20};
    var I = 2.54; // pulgadas a cm
    
    // DPI actual (original)
    var curDpi = Math.round(Math.min(originalW / ((sd.w || 20) / I), originalH / ((sd.h || 20) / I)) || 0);
    if (dpiBef) dpiBef.textContent = curDpi + ' DPI';
    
    // DPI mejorado se actualizará con dimensiones reales en updateResultStats
  }
  
  // Actualizar datos en la barra inferior
  // Nota: osNew y osScaleL se actualizarán con dimensiones reales en updateResultStats
  var osOrig = document.getElementById('os-orig');
  if (osOrig) osOrig.textContent = originalW + '×' + originalH;
  // osNew y osScaleL se actualizarán con dimensiones reales cuando la imagen cargue
  
  // Actualizar comparador en pantalla de resultado (sc4)
  var rImgBefore = document.getElementById('r-img-before');
  var rImgAfter = document.getElementById('r-img-after');
  var rCsBefore = document.getElementById('r-cs-before');
  var rCsAfter = document.getElementById('r-cs-after');
  
  if (rImgBefore) {
    var rBeforeSrc = ST.originalURL || ST.beforeURL || '';
    rImgBefore.src = rBeforeSrc;
    rImgBefore.style.display = 'block';
    rImgBefore.style.width = '100%';
    rImgBefore.style.height = '100%';
    rImgBefore.style.objectFit = 'contain';
    rImgBefore.onload = function() {
      console.log('✅ r-img-before cargado correctamente:', rBeforeSrc);
      if (rCsBefore) rCsBefore.style.display = 'block';
    };
    rImgBefore.onerror = function() {
      console.error('❌ Error al cargar r-img-before:', rBeforeSrc);
    };
    console.log('r-img-before actualizado:', rBeforeSrc);
  }
  
  if (rImgAfter) {
    console.log('🖼️ Actualizando r-img-after con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    rImgAfter.src = url;
    rImgAfter.style.display = 'block';
    rImgAfter.style.width = '100%';
    rImgAfter.style.height = '100%';
    rImgAfter.style.objectFit = 'contain';
    rImgAfter.onload = function() {
      console.log('✅ r-img-after cargado correctamente:', url);
      if (rCsAfter) rCsAfter.style.display = 'block';
    };
    rImgAfter.onerror = function() {
      console.error('❌ Error al cargar r-img-after:', url);
    };
    console.log('r-img-after actualizado:', url);
  }
  
  // Asegurar que los contenedores sean visibles
  if (rCsBefore) {
    rCsBefore.style.display = 'block';
    rCsBefore.style.opacity = '1';
  }
  if (rCsAfter) {
    rCsAfter.style.display = 'block';
    rCsAfter.style.opacity = '1';
  }
  
  // Reinicializar el comparador para que funcione el slider
  if (typeof initCompare === 'function') {
    setTimeout(function() {
      initCompare();
      console.log('Comparador reinicializado');
    }, 100);
  }
  
  // Actualizar datos en el comparador de resultado
  // Nota: rChipNew se actualizará con dimensiones reales en updateResultStats
  var rChipOrig = document.getElementById('r-chip-orig');
  if (rChipOrig) rChipOrig.textContent = originalW + '×' + originalH;
  
  // Actualizar otros elementos de resultado
  var resultImg = document.getElementById('result-img');
  if (resultImg) {
    console.log('🖼️ Actualizando result-img con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    resultImg.src = url;
  }
  
  var afterImg = document.getElementById('after-img');
  if (afterImg) {
    console.log('🖼️ Actualizando after-img con imagen mejorada:', url);
    console.log('URL es diferente de original?', url !== ST.originalURL && url !== ST.src);
    afterImg.src = url;
  }
  
  // Actualizar mockup editor si existe
  var designEl = document.getElementById('design-el');
  if (designEl) {
    var mockupImg = designEl.querySelector('img');
    if (mockupImg) mockupImg.src = url;
  }
  
  // Los campos de estadísticas se actualizarán cuando la imagen cargue
  // mediante la función updateResultStats() que se llama en imgForDimensions.onload

  // Update download button
  var dlBtn = document.getElementById('dl-btn');
  if (dlBtn) {
    dlBtn.onclick = function() {
      // Gate: ask for login only at download
      var isLocalDev = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
      if (!isLocalDev && !clerkUser) {
        openAuthModal('signup');
        toast('Regístrate gratis para descargar tu imagen');
        return;
      }
      // Check plan limits (solo en producción)
      if (!isLocalDev) {
        if (userPlan === 'free' && imagesUsed >= 2) {
          document.getElementById('pricing-section').scrollIntoView({behavior:'smooth'});
          toast('Has usado tus 2 imágenes gratis. Elige un plan para continuar.');
          return;
        }
        if ((userPlan === 'pack5' && imagesUsed >= 5) || (userPlan === 'pack10' && imagesUsed >= 10)) {
          document.getElementById('pricing-section').scrollIntoView({behavior:'smooth'});
          toast('Has agotado tu pack. Compra otro para continuar.');
          return;
        }
      }
      // Allow download - VERIFICAR que se descarga la imagen mejorada
      console.log('💾 Preparando descarga de imagen mejorada...');
      console.log('URL de descarga:', url);
      console.log('¿Es blob URL?', url.startsWith('blob:'));
      
      // Verificar que no sea la imagen original
      if (url === ST.originalURL || url === ST.src) {
        console.error('❌ ERROR CRÍTICO: Se está descargando la imagen ORIGINAL en lugar de la mejorada!');
        toast('❌ Error: Se detectó que se descargaría la imagen original. Por favor, reporta este error.');
        return;
      }
      
      imagesUsed++;
      if (clerkUser) localStorage.setItem('px2_' + clerkUser.id, imagesUsed);
      updateAuthUI(clerkUser); // refresh credits display
      
      var a = document.createElement('a');
      a.href = url;
      a.download = 'pix2print_' + scale + 'x_enhanced_' + Date.now() + '.png';
      console.log('📥 Descargando:', a.download);
      a.click();
      toast('✅ Imagen mejorada descargada (Real-ESRGAN)');
    };
  }
  
  // Actualizar botón de mejora
  var upscaleBtn = document.getElementById('upscale-btn');
  if (upscaleBtn) {
    upscaleBtn.disabled = false;
    upscaleBtn.textContent = '✓ Mejorado — repetir';
  }

  // IMPORTANTE: Mantener en pantalla 3 (comparador) para que el usuario vea la imagen mejorada
  // Solo cambiar a pantalla 4 cuando el usuario haga clic en "Generar archivo final"
  var sc3 = document.getElementById('sc3');
  if (sc3) {
    // Asegurar que estamos en pantalla 3
    document.querySelectorAll('.screen,.proc-wrap').forEach(s => s.classList.remove('act'));
    sc3.classList.add('act');
    
    // Ocultar el overlay de procesamiento si existe
    var procWrap = document.getElementById('proc-wrap');
    if (procWrap) procWrap.classList.remove('act');
    
    // Actualizar stepbar para mostrar paso 3 activo
    for (var i = 1; i <= 3; i++) {
      var si = document.getElementById('si' + i);
      if (si) { si.classList.remove('act'); si.classList.add('done'); }
    }
    var si3 = document.getElementById('si3');
    if (si3) { si3.classList.remove('done'); si3.classList.add('act'); }
    
    // Asegurar que el botón "Generar archivo final" esté visible y funcional
    // (ya está en el HTML, solo necesitamos asegurar que ST.upscaleDone esté en true)
    console.log('✅ Mostrando pantalla 3 con imagen mejorada - El usuario puede ver la comparación antes/después');
    console.log('ℹ️ Para ver el resultado final, el usuario debe hacer clic en "Generar archivo final"');
    console.log('✅ ST.upscaleDone =', ST.upscaleDone, '- El botón "Generar archivo final" está habilitado');
  } else {
    // Si no existe sc3, ir directo a sc4 (fallback)
    console.warn('⚠️ Pantalla 3 no encontrada, yendo a pantalla 4');
    document.querySelectorAll('.screen,.proc-wrap').forEach(s => s.classList.remove('act'));
    var sc4 = document.getElementById('sc4');
    if (sc4) sc4.classList.add('act');
    
    // Update stepbar
    for (var i = 1; i <= 4; i++) {
      var si = document.getElementById('si' + i);
      if (si) { si.classList.remove('act'); si.classList.add('done'); }
    }
  }

  console.log('✅ showRealESRGANResult completado');
  
  // Mostrar mensaje según el motor usado
  if (ST.usingAIEngine) {
    toast('🎉 ¡Imagen mejorada con Real-ESRGAN (IA)! La calidad ha sido mejorada realmente, no solo aumentado el tamaño.', 6000);
  } else {
    toast('⚠️ Imagen procesada con motor estándar. Solo aumenta el tamaño, no mejora la calidad real. Recarga créditos en Replicate para usar Real-ESRGAN (IA).', 8000);
  }
}

function updateProgress(msg, pct) {
  // Actualizar el sistema de progreso que existe en el HTML
  var bar = document.getElementById('pbar'); // Barra de progreso
  var pctEl = document.getElementById('ppct'); // Porcentaje
  var msgEl = document.getElementById('pmsg'); // Mensaje
  
  if (bar) bar.style.width = pct + '%';
  if (pctEl) pctEl.textContent = Math.round(pct) + '%';
  if (msgEl) msgEl.textContent = msg;
  
  // También actualizar el elemento proc-info si existe
  var procInfo = document.getElementById('proc-info');
  if (procInfo && msg) {
    procInfo.textContent = msg;
  }
  
  console.log('Progress update:', msg, pct + '%');
}

function fileToBase64(file) {
  return new Promise(function(resolve, reject) {
    var reader = new FileReader();
    reader.onload = function(e) { resolve(e.target.result); };
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

function sleep(ms) {
  return new Promise(function(resolve) { setTimeout(resolve, ms); });
}

</script>

</body>
</html>
